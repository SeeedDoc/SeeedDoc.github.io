<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - CO2 Sensor</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - CO2 Sensor</h1>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><img src="img/Grove_CO2_Sensor.jpg" width="400"/> <div class="thumbcaption"></div></div></div>
<p><br/>
The Grove - CO2 Sensor module is infrared CO2 sensor high sensitivity and high resolution.
Infrared CO2 sensor MH-Z16 Is a general-purpose, small sensors, the use of non-dispersive infrared (NDIR) Present in the principle of the air CO2 Detect, with good selectivity, oxygen- dependent, long life, built-in temperature sensor, temperature compensation, with UART output, easy to use.
It can be widely used in HVAC and indoor air quality monitoring, industrial process monitoring and security, agriculture and livestock production process monitoring.
</p><p><br/>
<a href="http://www.seeedstudio.com/depot/Grove-CO2-Sensor-p-1863.html?cPath=25_127"><i>I need a Grove - CO2 Sensor</i></a>
</p><p><span style="color: red">Note that The sensor value only reflects the approximated trend of gas concentration in a permissible error range, it DOES NOT represent the exact gas concentration. The detection of certain components in the air usually requires a more precise and costly instrument, which cannot be done with a single gas sensor. If your project is aimed at obtaining the gas concentration at a very precise level, then we do not recommend this gas sensor.</span>
</p>
<p><br/>
</p>
<h2> Specification</h2>
<ul><li> Measuring the range of 0-2000 parts per million (PPM) 
</li><li> Resolution of 1 PPM  0-2000 parts per million (PPM)
</li><li> Accuracy of 200 PPM
</li><li> A Warm - up time 3 minutes
</li><li> Response Time &lt; 90s
</li><li> Operating temperature 0 to 50℃
</li><li> Operating Humidity 0% ~ 90% RH 
</li><li> Storage temperature - 20-60℃
</li><li> Operating Voltage4.5 V to 6 V DC
</li><li> The Current maximum Current of less than 100 ma, the average Current of less than 50 ma
</li><li> Output mode UART
</li></ul>
<p><br/>
<br/>
</p>
<h2>  Demonstration  </h2>
<p>Connect the module with Grove Shield using like following picture and use the program below to gain the voltage. 
</p><p>Please note that the best preheat time of the sensor is about 180s. For the detailed information about the sensor, please refer to the datasheet. 
</p><p><img src="img/5.jpg" width="600"/>
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;SoftwareSerial.h&gt;</span>
 
<span class="co2">#define DEBUG 0</span>
 
<span class="kw4">const</span> <span class="kw4">int</span> pinRx <span class="sy1">=</span> <span class="nu0">8</span><span class="sy4">;</span>
<span class="kw4">const</span> <span class="kw4">int</span> pinTx <span class="sy1">=</span> <span class="nu0">7</span><span class="sy4">;</span>
 
<span class="kw2">SoftwareSerial</span> sensor<span class="br0">(</span>pinTx,pinRx<span class="br0">)</span><span class="sy4">;</span>
 
<span class="kw4">const</span> <span class="kw4">unsigned</span> <span class="kw4">char</span> cmd_get_sensor<span class="br0">[</span><span class="br0">]</span> <span class="sy1">=</span>
<span class="br0">{</span>
    <span class="nu12">0xff</span>, <span class="nu12">0x01</span>, <span class="nu12">0x86</span>, <span class="nu12">0x00</span>, <span class="nu12">0x00</span>,
    <span class="nu12">0x00</span>, <span class="nu12">0x00</span>, <span class="nu12">0x00</span>, <span class="nu12">0x79</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">unsigned</span> <span class="kw4">char</span> dataRevice<span class="br0">[</span><span class="nu0">9</span><span class="br0">]</span><span class="sy4">;</span>
<span class="kw4">int</span> temperature<span class="sy4">;</span>
<span class="kw4">int</span> CO2PPM<span class="sy4">;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    sensor.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">115200</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"get a 'g', begin to read from sensor!"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"********************************************************"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">if</span><span class="br0">(</span>dataRecieve<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"Temperature: "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>temperature<span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"  CO2: "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>CO2PPM<span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">""</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">bool</span> dataRecieve<span class="br0">(</span><span class="kw4">void</span><span class="br0">)</span>
<span class="br0">{</span>
    byte data<span class="br0">[</span><span class="nu0">9</span><span class="br0">]</span><span class="sy4">;</span>
    <span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
 
    <span class="co1">//transmit command data</span>
    <span class="kw1">for</span><span class="br0">(</span>i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span><span class="kw3">sizeof</span><span class="br0">(</span>cmd_get_sensor<span class="br0">)</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">)</span>
    <span class="br0">{</span>
        sensor.<span class="kw3">write</span><span class="br0">(</span>cmd_get_sensor<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="co1">//begin reveiceing data</span>
    <span class="kw1">if</span><span class="br0">(</span>sensor.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">while</span><span class="br0">(</span>sensor.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="br0">{</span>
            <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span>i<span class="sy1">&lt;</span><span class="nu0">9</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">)</span>
            <span class="br0">{</span>
                data<span class="br0">[</span>i<span class="br0">]</span> <span class="sy1">=</span> sensor.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
            <span class="br0">}</span>
        <span class="br0">}</span>
    <span class="br0">}</span>
 
<span class="co2">#if DEBUG</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> j<span class="sy1">&lt;</span><span class="nu0">9</span><span class="sy4">;</span> j<span class="sy2">++</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>data<span class="br0">[</span>j<span class="br0">]</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">""</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif</span>
 
    <span class="kw1">if</span><span class="br0">(</span><span class="br0">(</span>i <span class="sy3">!</span><span class="sy1">=</span> <span class="nu0">9</span><span class="br0">)</span> <span class="sy3">||</span> <span class="br0">(</span><span class="nu0">1</span> <span class="sy2">+</span> <span class="br0">(</span><span class="nu12">0xFF</span> <span class="sy3">^</span> <span class="br0">(</span>byte<span class="br0">)</span><span class="br0">(</span>data<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span> <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span>
    <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span> <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span> <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">6</span><span class="br0">]</span> <span class="sy2">+</span> data<span class="br0">[</span><span class="nu0">7</span><span class="br0">]</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span> <span class="sy3">!</span><span class="sy1">=</span> data<span class="br0">[</span><span class="nu0">8</span><span class="br0">]</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
    CO2PPM <span class="sy1">=</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span>data<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span> <span class="sy2">*</span> <span class="nu0">256</span> <span class="sy2">+</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span>data<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="sy4">;</span>
    temperature <span class="sy1">=</span> <span class="br0">(</span><span class="kw4">int</span><span class="br0">)</span>data<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span> <span class="sy2">-</span> <span class="nu0">40</span><span class="sy4">;</span>
 
    <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p><img src="img/Uart_co2.jpg" width="600"/>
</p><p><br/>
<br/>
</p>
<h2> Reference</h2>
<ul><li> 350~450ppm: General outdoor environment
</li><li> 350~1000ppm：The air is fresh and breathing smooth
</li><li> 1000~2000ppm：The air was stagnant and feel asleep
</li><li> 2000~5000ppm：headache, asleep, dull, unable To Focus, heart beat rock and even mild nausea
</li><li> &gt;5000ppm：severe depletion of oxygen, permanent brain damage and even death
</li></ul>
<p><br/>
<br/>
</p>
<h2>  Resources  </h2>
<ul><li><a href="res/MH-Z16_CO2.pdf">MH-Z16_CO2 datasheet_ZH_CN.pdf</a>
</li><li><a href="res/MH-Z16_CO2_datasheet_EN.pdf">MH-Z16_CO2 datasheet_EN.pdf</a>
</li><li>
</li></ul>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>