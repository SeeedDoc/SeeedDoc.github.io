<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - Serial MP3 Player</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - Serial MP3 Player</h1>
<div class="thumb tright"><div class="thumbinner" style="width:502px;"><a href="http://www.seeedstudio.com/depot/grove-serial-mp3-player-p-1542.html"><img src="img/Mp3sensor_02.jpg" width="500"/></a> <div class="thumbcaption"></div></div></div>
<p>Grove-Serial MP3 Player is a kind of simple MP3 player device whose design is based on a high-quality MP3 audio chip---WT5001. It can support 8KHZ~44.1kHZ sampling frequency MP3 and WAV file formats. This product has several peripheral ports: a standard UART Grove interface, a dual track headphone jack, an external interface and also a Micro SD card interface. You can control the MP3 playback state by sending commands to module via serial port tools, such as switch songs, change the volume and play mode and so on. It seems a simple module, but it owns such strong function. Want to know how the sound quality? Please come to experience it!<br/>
</p><p><br/>
<a href="http://www.seeedstudio.com/depot/grove-serial-mp3-player-p-1542.html"><img src="../common/Get_One_Now_Banner.png" width="300"/></a>
</p><p><br/>
</p>
<p><br/>
</p>
<h2> Feature</h2>
<ul><li>Standard Grove interface
</li><li>Asynchronous serial port control play mode 
</li><li>Busy Indicator  
</li><li>Reset Button
</li><li>Standard Micro SD card Interface
</li><li>Support FAT16 and FAT32 file system
</li></ul>
<h2> Interface Function</h2>
<p><br/><img src="img/Mp3_interface.jpg" width="642"/><br/>
</p>
<ul><li>①：Left Channel Grove Interface.
</li><li>②：Headset Interface:3.5mm headphones
</li><li>③：Right Channel Grove Interface.
</li><li>④：WT5001
</li><li>⑤：LED Indicator：LED is on when music is playing.
</li><li>⑥：UART Grove Interface
</li><li>⑦：SD Card: micro SD Card(≤2GB)
</li></ul>
<h2> Usage</h2>
<p>The Grove - Serial MP3 Play can be controlled by Arduino/Seeeduino. And there is a Serial_MP3 test code for you to use. I believe you can easily get started. For more detailed information, please refer to the following description.  
The hardware installation:
</p>
<ul><li>Connect Grove - Serial MP3 Play to the Digital 2 port of Arduino/Seeeduino, Notice that you can change the pin number as you like, just make sure corresponding changes the code.  Then connect your Arduino/Seeeduino to PC with a USB cable.  
</li><li>Plug a earphone into Grove - Serial MP3 Play. Now the hardware part has been completed. 
</li><li>After uploading it, open serial tool to send commands.
</li><li>Upload the code below, please click <a href="/Upload_Code">here</a> if you do not know how to upload.<br/>
</li></ul>
<p>The following code includes play mode parameter. You only need to change the parameter to switch the play mode. 
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="coMULTI">/*****************************************************************************/</span>
<span class="co1">//    Function: control the seeedstudio Grove MP3 player</span>
<span class="co1">//      Hardware: Grove - Serial MP3 Player</span>
<span class="coMULTI">/*******************************************************************************/</span>
<span class="co2">#include &lt;SoftwareSerial.h&gt;</span>
<span class="kw2">SoftwareSerial</span> mp3<span class="br0">(</span><span class="nu0">2</span>, <span class="nu0">3</span><span class="br0">)</span><span class="sy4">;</span><span class="co1">//modify this with the connector you are using.</span>
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    mp3.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw2">true</span> <span class="sy1">==</span>SetPlayMode<span class="br0">(</span><span class="nu12">0x01</span><span class="br0">)</span><span class="br0">)</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Set The Play Mode to 0x01, Single Loop Mode."</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">else</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Playmode Set Error"</span><span class="br0">)</span><span class="sy4">;</span>
    PauseOnOffCurrentMusic<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
<span class="br0">}</span>
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    SetPlayMode<span class="br0">(</span><span class="nu12">0x01</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy4">;</span>
    SetMusicPlay<span class="br0">(</span><span class="nu8">00</span>,<span class="nu8">01</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy4">;</span>
    SetVolume<span class="br0">(</span><span class="nu12">0x0E</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
<span class="co1">//Set the music index to play, the index is decided by the input sequence</span>
<span class="co1">//of the music;</span>
<span class="co1">//hbyte: the high byte of the index;</span>
<span class="co1">//lbyte: the low byte of the index;</span>
<span class="kw4">boolean</span> SetMusicPlay<span class="br0">(</span>uint8_t hbyte,uint8_t lbyte<span class="br0">)</span>
<span class="br0">{</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x04</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0xA0</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span>hbyte<span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span>lbyte<span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span>mp3.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="nu12">0xA0</span><span class="sy1">==</span>mp3.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
        <span class="kw1">else</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
<span class="co1">// Pause on/off  the current music</span>
<span class="kw4">boolean</span> PauseOnOffCurrentMusic<span class="br0">(</span><span class="kw4">void</span><span class="br0">)</span>
<span class="br0">{</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x02</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0xA3</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span>mp3.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="nu12">0xA3</span><span class="sy1">==</span>mp3.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
        <span class="kw1">else</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="co1">//Set the volume, the range is 0x00 to 0x1F</span>
<span class="kw4">boolean</span> SetVolume<span class="br0">(</span>uint8_t volume<span class="br0">)</span>
<span class="br0">{</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x03</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0xA7</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span>volume<span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span>mp3.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="nu12">0xA7</span><span class="sy1">==</span>mp3.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
        <span class="kw1">else</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">boolean</span> SetPlayMode<span class="br0">(</span>uint8_t playmode<span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span><span class="br0">(</span>playmode<span class="sy1">==</span><span class="nu12">0x00</span><span class="br0">)</span><span class="sy3">|</span><span class="br0">(</span>playmode<span class="sy1">==</span><span class="nu12">0x01</span><span class="br0">)</span><span class="sy3">|</span><span class="br0">(</span>playmode<span class="sy1">==</span><span class="nu12">0x02</span><span class="br0">)</span><span class="sy3">|</span><span class="br0">(</span>playmode<span class="sy1">==</span><span class="nu12">0x03</span><span class="br0">)</span><span class="br0">)</span><span class="sy1">==</span><span class="kw2">false</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"PlayMode Parameter Error! "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x03</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0xA9</span><span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span>playmode<span class="br0">)</span><span class="sy4">;</span>
    mp3.<span class="kw3">write</span><span class="br0">(</span><span class="nu12">0x7E</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span>mp3.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span><span class="nu12">0xA9</span><span class="sy1">==</span>mp3.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">return</span> <span class="kw2">true</span><span class="sy4">;</span>
        <span class="kw1">else</span>
        <span class="kw1">return</span> <span class="kw2">false</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p><b>Note: </b><br/>
<u>1. SetPlayMode(uint8_t playmode)</u>
</p>
<dl><dd>The Function is used to set the MP3 Play Mode. 
<dl><dd>uint8_t playmode: the parameter to change the play mode. Can be 0x00, 0x01 ,0x02 or 0x03. 
</dd></dl>
</dd></dl>
<p><u>2. SetVolume(uint8_t volume)</u>
</p>
<dl><dd>The Function is used to set the MP3 Play Volume. 
<dl><dd>uint8_t volume: the parameter to change the play volume. The parameter range is 0x00 to 0x1F.
</dd></dl>
</dd></dl>
<p><u>3. SetMusicPlay(uint8_t hbyte,uint8_t lbyte)</u>
</p>
<dl><dd>The Function is used to set the music index to play, the index is decided by the input sequence of the music
<dl><dd>uint8_t hbyte: the high byte of the index;
</dd><dd>uint8_t lbyte: the low byte of the index;
</dd></dl>
</dd></dl>
<p><u>4. PauseOnOffCurrentMusic(void)</u>
</p>
<dl><dd>The Function is used to  Pause on/off  the current music.
</dd></dl>
<ul><li>Now you can hear songs stored in your SD card. And in the playing mode, the D1 indicator is on. If in the pause mode, the indicator will blink. More experience is waiting for you！
</li></ul>
<p><br/>
There is another way to control MP3 play mode via serial tool.In this way,  you need a <a href="http://www.seeedstudio.com/depot/uartsbee-v4-p-688.html?cPath=63_66">UartSBee</a> to connect MP3 to PC. The hardware installation as show below:<br/>
<img src="img/Using_UartSBee_to_Control_MP3.jpg" width="467"/><br/>
After the connection is completed, open the serial tool to send commands. About the specific commands, please see the reference part!<br/>
<img src="img/Serial_tool_to_send_commands.jpg" width="540"/><br/> More experience is waiting for you！
</p>
<h2> Reference</h2>
<p>Commonly Command Descriptions:
</p>
<table  cellspacing="0" width="80%">
<tr>
<th scope="col"> Command Name
</th>
<th scope="col"> Command Format
</th>
<th scope="col"> Description
</th></tr>
<tr>
<th scope="row">  Pause
</th>
<td> 7E 02 A3 7E
</td>
<td> The music will stop when you send this command at the first time. After resending this command, it will continue.
</td></tr>
<tr>
<th scope="row">Stop
</th>
<td> 7E 02 A4 7E
</td>
<td> This command is able to trigger play the next song, or trigger play the first one if the player is playing the last one.
</td></tr>
<tr>
<th scope="row"> Next
</th>
<td> 7E 02 A5 7E
</td>
<td> This command is able to trigger play the next song, or trigger play the first one if the player is playing the last one.
</td></tr>
<tr>
<th scope="row">  Previous
</th>
<td> 7E 02 A6 7E
</td>
<td> This command can trigger play the previous song. Sending this command can trigger playback to the last song when you are enjoying the first one.
</td></tr>
<tr>
<th scope="row">Volume control
</th>
<td> 7E 03 A7 1F 7E
</td>
<td> There are 32 volume levels from 00 to 31. 00 is mute, and 31 for the maximum volume.
</td></tr>
<tr>
<th rowspan="4" scope="row"> Assigned play mode
</th>
<td rowspan="4"> 7E 03 A9 XX 7E
</td>
<td> XX=00 means playing single without playback(default)
</td></tr>
<tr>
<td> XX=01 means the single repeated play mode
</td></tr>
<tr>
<td> XX=02 means that it is all tracks repeated playback mode.
</td></tr>
<tr>
<td> XX=03 stands for random pattern.
</td></tr></table>
<h2> Resources</h2>
<p><a href="res/Grove-UART_MP3_Play_Eagle_File.zip">Grove - Serial MP3 Play Eagle File</a><br/>
<a href="res/Grove-Serial_MP3_Player.pdf">Grove - Serial MP3 Play Schematic in PDF format</a><br/>
<a href="https://github.com/Seeed-Studio/Grove_Serial_MP3_Player">Demo code on github </a><br/>
<a href="res/WT5001_datasheet_V1.5.pdf">datasheet WT5001 </a>
</p><p>
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>