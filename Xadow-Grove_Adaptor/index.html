<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Xadow - Grove Adaptor</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Xadow - Grove Adaptor</h1>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><img src="img/X_adaptor_01.jpg" width="300"/> <div class="thumbcaption"></div></div></div>

<p>Xadow Grove Adaptor is a device that converts Grove interface to Xadow Interface to compatible with Xadow System. It can achieve this function: analog signal from two analog Grove interface will output by Xadow I2C bus through ADC. The signal from Grove I2C Interface will directly lead to Xadow I2C bus without conversion. The A/D conversion based on ADCC121C021, a 12-bit precision ADC, create high precision.
</p>
<h2> Specification</h2>
<ul><li>Work Voltage： 3.3V
</li><li>A/D Resolution：12 bit
</li><li>Sample Rate： 188.9 ksps
</li><li>I2C  address variable
</li><li>Dimensions: 25.43mm x 20.35mm
</li></ul>
<h2> Demonstration </h2>
<p>Next we will show you how to read the output value of Grove modules by using Xadow Grove Adaptor.
</p>
<h3> Measure Analog Signal</h3>
<p>If measure analog signal Grove module outputs, you need to connect Grove module to analog Grove Interface where they are marked as "A0" and "A1".<br/>
<b>The Hardware Installation should be:</b> <br/>
<img src="img/XadowAdaptor2.jpg" width="600"/><br/>
</p><p>Here Grove - Gas sensor outputs analog signal is connected to AO, so the I2C Address applied to the test code is 0x58(default). In other words, the I2C Address should be 0x59 when Grove - Gas Sensor connect to A1 interface.<br/>
<b>The test code is:</b>
</p>
<pre>
#include &lt;Wire.h&gt;
#include &lt;Streaming.h&gt;

#define ADDR_ADC121             0x58

#define V_REF 3.00

#define REG_ADDR_RESULT         0x00
#define REG_ADDR_ALERT          0x01
#define REG_ADDR_CONFIG         0x02
#define REG_ADDR_LIMITL         0x03
#define REG_ADDR_LIMITH         0x04
#define REG_ADDR_HYST           0x05
#define REG_ADDR_CONVL          0x06
#define REG_ADDR_CONVH          0x07

unsigned int getData;
float analogVal=0;         // convert
void init_adc()
{
  Wire.beginTransmission(ADDR_ADC121);        // transmit to device
  Wire.write(REG_ADDR_CONFIG);                // Configuration Register
  Wire.write(0x20);
  Wire.endTransmission();  
}

void read_adc()     //unsigned int *data
{
   
   
    Wire.beginTransmission(ADDR_ADC121);        // transmit to device
    Wire.write(REG_ADDR_RESULT);                // get result
    Wire.endTransmission();

    Wire.requestFrom(ADDR_ADC121, 2);           // request 2byte from device
    delay(1);
    if(Wire.available()&lt;=2)
    {
      getData = (Wire.read()&amp;0x0f)&lt;&lt;8;
      getData |= Wire.read();
    }
    Serial.print("getData:");
    Serial.println(getData);
    delay(5);
    Serial.print("The analog value is:");
    Serial.print(getData*V_REF*2/4096); 
    Serial.println("V");
}
void setup()
{
  Serial.begin(9600);
  Wire.begin();
  init_adc();
}

void loop()
{ 
  read_adc();//adcRead);
  delay(50);
}</pre>
<p>Upload code to Xadow Main Board, then open the serial monitor to observe output value：<br/>
<img src="img/Xadow_Grove_Adaptor_Result.png" width="403"/><br/>
</p>
<h3> Measure I2C Signal</h3>
<p>You need to connect  Grove module to I2C interface of Xadow Grove Adaptor when communication mode of Grove module is I2C. Now the sever of Xadow Grove Adaptor is delivering signal to Xadow I2C bus without ADC.
Taking Grove - Digital Light Sensor as example, let's learn its usage.<br/>
<b>Hardware Installation：</b><br/>
<img src="img/XadowAdaptor1.jpg" width="600"/><br/>
<b>Download the code：</b><br/>
</p>
<ul><li>Download the<a href="https://github.com/Seeed-Studio/Grove_Digital_Light_Sensorlibrary">Digital_Light_Library</a> of Grove - Digital Light Sensor from Github website and install it to your Arduino Library. Refer to <a href="/How_to_install_Arduino_Library">How to install Arduino Library</a> in wiki page, you will familiar with the installation. 
</li><li>Open code after you finish installing. 
</li></ul>
<pre>
/* Digital Light sensor demo V1.0
* Connect the sensor to I2C port of Arduino to use.
*
* By:http://www.seeedstudio.com
*/
#include &lt;Wire.h&gt;
#include &lt;Digital_Light_TSL2561.h&gt;
void setup()
{
  Wire.begin(); 
  Serial.begin(9600);
  TSL2561.init(); 
}

void loop()
{  
  unsigned long  Lux;
  TSL2561.getLux();
  Serial.print("The Light value is: ");
  Serial.println(TSL2561.calculateLux(0,0,1));
  delay(1000);
  }</pre>
<ul><li>Open the serial monitor to observe the LUX value. Artificially change the light intensity of surrounding environment, you will see the obvious change of the output value.
</li></ul>
<p><br/><img src="img/Digital_Light_Sensor_Score_Picture.jpg" width="319"/><br/>.
</p><p>The ADC IC ADC121C021 used in  Xadow Grove Adaptor have been adopter on  Grove - I2C ADC. Of course, the way to change I2C Address are same. Please refer to <a href="/Grove-I2C_ADC#Reference">Reference part</a> of Grove - I2C ADC about the varying method. In addition,"0" and "1" on board are the address varying area of A0 interface,"2" and "3" are the address varying area of A1 interface.
</p>
<h2> Resources</h2>
<ul><li><a href="res/Xadow_Grove_Adaptor_Eagle_File.zip">Xadow Grove Adaptor Eagle File</a>
</li><li><a href="res/Adc121c021.pdf">A/DC IC ADC121C021 datasheet</a>
</li></ul>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>