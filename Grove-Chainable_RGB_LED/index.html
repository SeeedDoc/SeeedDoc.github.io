<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - Chainable RGB LED</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - Chainable RGB LED</h1>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><img src="img/Chanbalelednb1.jpg" width="300"/> <div class="thumbcaption"></div></div></div><br/>
<p><b>Grove - Chainable RGB LED</b> is based on P9813 chip which is a full-color LED driver. It provides 3 constant-current drivers as well as modulated output of 256 shades of gray. It communicates with a MCU using 2-wire transmission (Data and Clock). It uses this 2-wire transmission to cascade additional <b>Grove - Chainable RGB LED</b> modules. The built-in clock regeneration enhances the transmission distance. This Grove module is suitable for any colorful LED based projects.
</p><p><b>Model: <a href="http://www.seeedstudio.com/depot/twig-chainable-rgb-led-p-850.html?cPath=156_157">COM53140P</a></b>
</p>
<p><br/>
</p>
<h2>  Specification  </h2>
<ul><li>Operating Voltage: 5V<br/>
</li><li>Operating Current: 20mA<br/>
</li><li>Communication Protocol: Serial<br/>
</li></ul>
<h2>  Usage  </h2>
<h3> With <a href="/w/index.php?title=Arduino&amp;action=edit&amp;redlink=1" title="Arduino (page does not exist)">Arduino</a></h3>
<p>When you get Grove - Chainble RGB LED, you may think how I can light up it. Now we will show you this demo: all colors of RGB cycles in an uniform way.<br/>
The hardware installation like this:
<br/><a href="/w/index.php?title=Picture&amp;action=edit&amp;redlink=1" title="Picture (page does not exist)">Picture</a><br/>
</p><p>To complete this demo, you can use one or more Grove - Chainable RGB LED. Note that the IN interface of one Grove - Chainable RGB LED should be connect to D7/D8 of <a href="/Grove-Base_Shield" title="Grove - Base Shield">Grove - Base Shield</a>  and its OUT interface connect to IN interface of another Grove - Chainable RGB LED, chainable more LED in this way.
</p>
<ul><li>Download <a href="https://github.com/pjpmarques/ChainableLED">Chainable LED Library</a> and install it to Arduino Library. There is the course about <a href="/How_to_install_Arduino_Library">how to install Arduino Library</a> in wiki page.
</li><li>Open the example CycleThroughColors by the path:File-&gt;Examples-&gt;CnainableLED_master and upload it to Seeeduino.
</li></ul>
<pre>
/* 
 * Example of using the ChainableRGB library for controlling a Grove RGB.
 * This code cycles through all the colors in an uniform way. This is accomplished using a HSB color space. 
 */
#include &lt;ChainableLED.h&gt;

#define NUM_LEDS  5

ChainableLED leds(7, 8, NUM_LEDS);

void setup()
{
}

float hue = 0.0;
boolean up = true;

void loop()
{
  for (byte i=0; i&lt;NUM_LEDS; i++)
    leds.setColorHSB(i, hue, 1.0, 0.5);
    
  delay(50);
    
  if (up)
    hue+= 0.025;
  else
    hue-= 0.025;
    
  if (hue&gt;=1.0 &amp;&amp; up)
    up = false;
  else if (hue&lt;=0.0 &amp;&amp; !up)
    up = true;
}
</pre>
<p>You can observe this scene: colors of two LED will gradient consistently.<br/>
</p><p><b>Extend application: </b><br/>
Based on <a href="https://github.com/pjpmarques/ChainableLED">Chainable LED Library</a>, we have designed this demo: RGB color varies with the temperature measured by Grove - temperature.  The RGB color vary from green to red when the temperature is from 25 to 32.  The test code is shown below. Do it if you are interested in it.
</p>
<pre>
// demo of temperature -&gt; rgbLED
// temperature form 25 - 32, rgbLed from green -&gt; red
// Grove-temperature plu to A0
// LED plug to D7,D8

#include &lt;Streaming.h&gt;
#include &lt;ChainableLED.h&gt;

#define TEMPUP 32
#define TEMPDOWN 25

ChainableLED leds(7, 8, 1); // connect to pin7 and pin8 , one led

int getAnalog() // get value from A0
{
    int sum = 0;
    for(int i=0; i&lt;32; i++)
    {
        sum += analogRead(A0);
    }
    
    return sum&gt;&gt;5;
}

float getTemp() // get temperature
{
    float temperature = 0.0;
    float resistance = 0.0;
    int B = 3975; //B value of the thermistor
    
    int a = getAnalog();
    
    resistance = (float)(1023-a)*10000/a; //get the resistance of the sensor;
    temperature = 1/(log(resistance/10000)/B+1/298.15)-273.15; //convert to temperature via datasheet ;
    return temperature;
}

void ledLight(int dta) // light led
{

    dta = dta/4; // 0 - 255
    
    int colorR = dta;
    int colorG = 255-dta;
    int colorB = 0;

    leds.setColorRGB(0, colorR, colorG, colorB);
}

void setup()
{
    Serial.begin(38400);
    cout &lt;&lt; "hello world !" &lt;&lt; endl;
}

void loop()
{
    float temp = getTemp();
    int nTemp = temp*100;
    
    nTemp = nTemp &gt; TEMPUP*100 ? TEMPUP*100 : (nTemp &lt; TEMPDOWN*100 ? TEMPDOWN*100 : nTemp);
    nTemp = map(nTemp, TEMPDOWN*100, TEMPUP*100, 0, 1023);
    ledLight(nTemp);
    delay(100);
}
</pre>
<h3>  With <a href="/GrovePiPlus" title="GrovePi+">Raspberry Pi</a> </h3>
<p>1.You should have got a raspberry pi and a grovepi or grovepi+.<br/>
2.You should have completed configuring the development enviroment, otherwise follow <a href="/GrovePiPlus#Introducing_the_GrovePi.2B">here</a>.
<br/>
3.Connection
<br/>
</p>
<ul><li> Plug the sensor to grovepi socket D7 by using a grove cable.<br/>
</li></ul>
<p>4.Navigate to the demos' directory: <br/>
</p>
<pre>   cd yourpath/GrovePi/Software/Python/
</pre>
<ul><li> To see the code
</li></ul>
<pre>   nano grove_chainable_rgb_led.py   # "Ctrl+x" to exit #
</pre>
<pre>
import time
import grovepi

# Connect first LED in Chainable RGB LED chain to digital port D7
# In: CI,DI,VCC,GND
# Out: CO,DO,VCC,GND
pin = 7

# I have 10 LEDs connected in series with the first connected to the GrovePi and the last not connected
# First LED input socket connected to GrovePi, output socket connected to second LED input and so on
numleds = 1  

grovepi.pinMode(pin,"OUTPUT")
time.sleep(1)

# Chainable RGB LED methods
# grovepi.storeColor(red, green, blue)
# grovepi.chainableRgbLed_init(pin, numLeds)
# grovepi.chainableRgbLed_test(pin, numLeds, testColor)
# grovepi.chainableRgbLed_pattern(pin, pattern, whichLed)
# grovepi.chainableRgbLed_modulo(pin, offset, divisor)
# grovepi.chainableRgbLed_setLevel(pin, level, reverse)

# test colors used in grovepi.chainableRgbLed_test()
testColorBlack = 0   # 0b000 #000000
testColorBlue = 1    # 0b001 #0000FF
testColorGreen = 2   # 0b010 #00FF00
testColorCyan = 3    # 0b011 #00FFFF
testColorRed = 4     # 0b100 #FF0000
testColorMagenta = 5 # 0b101 #FF00FF
testColorYellow = 6  # 0b110 #FFFF00
testColorWhite = 7   # 0b111 #FFFFFF

# patterns used in grovepi.chainableRgbLed_pattern()
thisLedOnly = 0
allLedsExceptThis = 1
thisLedAndInwards = 2
thisLedAndOutwards = 3

try:

    print "Test 1) Initialise"

    # init chain of leds
    grovepi.chainableRgbLed_init(pin, numleds)
    time.sleep(.5)

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set led 1 to green
    grovepi.chainableRgbLed_pattern(pin, thisLedOnly, 0)
    time.sleep(.5)

    # change color to red
    grovepi.storeColor(255,0,0)
    time.sleep(.5)

    # set led 10 to red
    grovepi.chainableRgbLed_pattern(pin, thisLedOnly, 9)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 2a) Test Patterns - black"

    # test pattern 0 - black (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(1)


    print "Test 2b) Test Patterns - blue"

    # test pattern 1 blue
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlue)
    time.sleep(1)


    print "Test 2c) Test Patterns - green"

    # test pattern 2 green
    grovepi.chainableRgbLed_test(pin, numleds, testColorGreen)
    time.sleep(1)


    print "Test 2d) Test Patterns - cyan"

    # test pattern 3 cyan
    grovepi.chainableRgbLed_test(pin, numleds, testColorCyan)
    time.sleep(1)


    print "Test 2e) Test Patterns - red"

    # test pattern 4 red
    grovepi.chainableRgbLed_test(pin, numleds, testColorRed)
    time.sleep(1)


    print "Test 2f) Test Patterns - magenta"

    # test pattern 5 magenta
    grovepi.chainableRgbLed_test(pin, numleds, testColorMagenta)
    time.sleep(1)


    print "Test 2g) Test Patterns - yellow"

    # test pattern 6 yellow
    grovepi.chainableRgbLed_test(pin, numleds, testColorYellow)
    time.sleep(1)


    print "Test 2h) Test Patterns - white"

    # test pattern 7 white
    grovepi.chainableRgbLed_test(pin, numleds, testColorWhite)
    time.sleep(1)


    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 3a) Set using pattern - this led only"

    # change color to red
    grovepi.storeColor(255,0,0)
    time.sleep(.5)

    # set led 3 to red
    grovepi.chainableRgbLed_pattern(pin, thisLedOnly, 2)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 3b) Set using pattern - all leds except this"

    # change color to blue
    grovepi.storeColor(0,0,255)
    time.sleep(.5)

    # set all leds except for 3 to blue
    grovepi.chainableRgbLed_pattern(pin, allLedsExceptThis, 3)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 3c) Set using pattern - this led and inwards"

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set leds 1-3 to green
    grovepi.chainableRgbLed_pattern(pin, thisLedAndInwards, 2)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 3d) Set using pattern - this led and outwards"

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set leds 7-10 to green
    grovepi.chainableRgbLed_pattern(pin, thisLedAndOutwards, 6)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 4a) Set using modulo - all leds"

    # change color to black (fully off)
    grovepi.storeColor(0,0,0)
    time.sleep(.5)

    # set all leds black
    # offset 0 means start at first led
    # divisor 1 means every led
    grovepi.chainableRgbLed_modulo(pin, 0, 1)
    time.sleep(.5)

    # change color to white (fully on)
    grovepi.storeColor(255,255,255)
    time.sleep(.5)

    # set all leds white
    grovepi.chainableRgbLed_modulo(pin, 0, 1)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 4b) Set using modulo - every 2"

    # change color to red
    grovepi.storeColor(255,0,0)
    time.sleep(.5)

    # set every 2nd led to red
    grovepi.chainableRgbLed_modulo(pin, 0, 2)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)


    print "Test 4c) Set using modulo - every 2, offset 1"

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set every 2nd led to green, offset 1
    grovepi.chainableRgbLed_modulo(pin, 1, 2)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 4d) Set using modulo - every 3, offset 0"

    # change color to red
    grovepi.storeColor(255,0,0)
    time.sleep(.5)

    # set every 3nd led to red
    grovepi.chainableRgbLed_modulo(pin, 0, 3)
    time.sleep(.5)

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set every 3nd led to green, offset 1
    grovepi.chainableRgbLed_modulo(pin, 1, 3)
    time.sleep(.5)

    # change color to blue
    grovepi.storeColor(0,0,255)
    time.sleep(.5)

    # set every 3nd led to blue, offset 2
    grovepi.chainableRgbLed_modulo(pin, 2, 3)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 4e) Set using modulo - every 3, offset 1"

    # change color to yellow
    grovepi.storeColor(255,255,0)
    time.sleep(.5)

    # set every 4nd led to yellow
    grovepi.chainableRgbLed_modulo(pin, 1, 3)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)


    print "Test 4f) Set using modulo - every 3, offset 2"

    # change color to magenta
    grovepi.storeColor(255,0,255)
    time.sleep(.5)

    # set every 4nd led to magenta
    grovepi.chainableRgbLed_modulo(pin, 2, 3)
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 5a) Set level 6"

    # change color to green
    grovepi.storeColor(0,255,0)
    time.sleep(.5)

    # set leds 1-6 to green
    grovepi.write_i2c_block(0x04,[95,pin,6,0])
    time.sleep(.5)

    # pause so you can see what happened
    time.sleep(2)

    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    time.sleep(.5)


    print "Test 5b) Set level 7 - reverse"

    # change color to red
    grovepi.storeColor(255,0,0)
    time.sleep(.5)

    # set leds 4-10 to red
    grovepi.write_i2c_block(0x04,[95,pin,7,1])
    time.sleep(.5)


except KeyboardInterrupt:
    # reset (all off)
    grovepi.chainableRgbLed_test(pin, numleds, testColorBlack)
    break
except IOError:
    print "Error"

</pre>
<ul><li>Notice that there's something you have to concern of:
</li></ul>
<pre>pin = 7         #setting up the output pin
numleds = 1     #how many leds you plug
</pre>
<ul><li>Also all methods you can see in grovepi.py is:
</li></ul>
<pre>storeColor(red, green, blue)
chainableRgbLed_init(pin, numLeds)
chainableRgbLed_test(pin, numLeds, testColor)
chainableRgbLed_pattern(pin, pattern, whichLed)
chainableRgbLed_modulo(pin, offset, divisor)
chainableRgbLed_setLevel(pin, level, reverse)

</pre>
<p>5.Run the demo.<br/>
</p>
<pre>   sudo python grove_chainable_rgb_led.py
</pre>
<p><br/>
6.This demo may not work if your grovepi dosen't have the newest firmware, update the firmware.
</p>
<pre>cd yourpath/GrovePi/Firmware
sudo ./firmware_update.sh
</pre>
<h3>  With Beaglebone Green</h3>
<p>To begin editing programs that live on BBG, you can use the Cloud9 IDE.<br/>
As a simple exercise to become familiar with Cloud9 IDE, creating a simple application to blink one of the 4 user programmable LEDs on the BeagleBone is a good start.
</p><p>If this is your first time to use Cloud9 IDE, please follow this <a href="/Beaglebone_green#Getting_Started"><b>link</b></a>.
<br/>
</p><p><br/>
<b>Step1:</b> Set the Grove - UART socket as a Grove - GPIO Socket, just follow this <a href="http://www.seeedstudio.com/recipe/362-how-to-use-the-grove-uart-port-as-a-gpio-on-bbg.html"><b>link</b></a>.
</p><p><b>Step2:</b> Click the "+" in the top-right to create a new file.
</p><p><img src="img/C9-create-tab.png" width="168"/>
</p><p><img src="img/C9_newfile.jpg" width="440"/>
</p><p><b>Step3:</b> Copy and paste the following code into the new tab
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="python source-python"><pre class="de1"><span class="kw1">import</span> <span class="kw3">time</span>
<span class="kw1">import</span> Adafruit_BBIO.<span class="me1">GPIO</span> <span class="kw1">as</span> GPIO
 
CLK_PIN <span class="sy0">=</span> <span class="st0">"P9_22"</span>
DATA_PIN <span class="sy0">=</span> <span class="st0">"P9_21"</span>
NUMBER_OF_LEDS <span class="sy0">=</span> <span class="nu0">1</span>
 
<span class="kw1">class</span> ChainableLED<span class="br0">(</span><span class="br0">)</span>:
    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> clk_pin<span class="sy0">,</span> data_pin<span class="sy0">,</span> number_of_leds<span class="br0">)</span>:
        <span class="kw2">self</span>.__clk_pin <span class="sy0">=</span> clk_pin
        <span class="kw2">self</span>.__data_pin <span class="sy0">=</span> data_pin
        <span class="kw2">self</span>.__number_of_leds <span class="sy0">=</span> number_of_leds
 
        GPIO.<span class="me1">setup</span><span class="br0">(</span><span class="kw2">self</span>.__clk_pin<span class="sy0">,</span> GPIO.<span class="me1">OUT</span><span class="br0">)</span>
        GPIO.<span class="me1">setup</span><span class="br0">(</span><span class="kw2">self</span>.__data_pin<span class="sy0">,</span> GPIO.<span class="me1">OUT</span><span class="br0">)</span>
 
        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">self</span>.__number_of_leds<span class="br0">)</span>:
            <span class="kw2">self</span>.<span class="me1">setColorRGB</span><span class="br0">(</span>i<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span>
 
    <span class="kw1">def</span> clk<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
        GPIO.<span class="me1">output</span><span class="br0">(</span><span class="kw2">self</span>.__clk_pin<span class="sy0">,</span> GPIO.<span class="me1">LOW</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">0.00002</span><span class="br0">)</span>
        GPIO.<span class="me1">output</span><span class="br0">(</span><span class="kw2">self</span>.__clk_pin<span class="sy0">,</span> GPIO.<span class="me1">HIGH</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">0.00002</span><span class="br0">)</span>
 
    <span class="kw1">def</span> sendByte<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> b<span class="br0">)</span>:
        <span class="st0">"Send one bit at a time, starting with the MSB"</span>
        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">8</span><span class="br0">)</span>:
            <span class="co1"># If MSB is 1, write one and clock it, else write 0 and clock</span>
            <span class="kw1">if</span> <span class="br0">(</span>b &amp; <span class="nu0">0x80</span><span class="br0">)</span> <span class="sy0">!=</span> <span class="nu0">0</span>:
                GPIO.<span class="me1">output</span><span class="br0">(</span><span class="kw2">self</span>.__data_pin<span class="sy0">,</span> GPIO.<span class="me1">HIGH</span><span class="br0">)</span>
            <span class="kw1">else</span>:
                GPIO.<span class="me1">output</span><span class="br0">(</span><span class="kw2">self</span>.__data_pin<span class="sy0">,</span> GPIO.<span class="me1">LOW</span><span class="br0">)</span>
            <span class="kw2">self</span>.<span class="me1">clk</span><span class="br0">(</span><span class="br0">)</span>
 
            <span class="co1"># Advance to the next bit to send</span>
            b <span class="sy0">=</span> b <span class="sy0">&lt;&lt;</span> <span class="nu0">1</span>
 
    <span class="kw1">def</span> sendColor<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> red<span class="sy0">,</span> green<span class="sy0">,</span> blue<span class="br0">)</span>:
        <span class="st0">"Start by sending a byte with the format '1 1 /B7 /B6 /G7 /G6 /R7 /R6' "</span>
        <span class="co1">#prefix = B11000000</span>
        prefix <span class="sy0">=</span> <span class="nu0">0xC0</span>
        <span class="kw1">if</span> <span class="br0">(</span>blue &amp; <span class="nu0">0x80</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:     
            <span class="co1">#prefix |= B00100000</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x20</span>
        <span class="kw1">if</span> <span class="br0">(</span>blue &amp; <span class="nu0">0x40</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:     
            <span class="co1">#prefix |= B00010000</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x10</span>
        <span class="kw1">if</span> <span class="br0">(</span>green &amp; <span class="nu0">0x80</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:    
            <span class="co1">#prefix |= B00001000</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x08</span>
        <span class="kw1">if</span> <span class="br0">(</span>green &amp; <span class="nu0">0x40</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:    
            <span class="co1">#prefix |= B00000100</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x04</span>
        <span class="kw1">if</span> <span class="br0">(</span>red &amp; <span class="nu0">0x80</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:      
            <span class="co1">#prefix |= B00000010</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x02</span>
        <span class="kw1">if</span> <span class="br0">(</span>red &amp; <span class="nu0">0x40</span><span class="br0">)</span> <span class="sy0">==</span> <span class="nu0">0</span>:      
            <span class="co1">#prefix |= B00000001</span>
            prefix |<span class="sy0">=</span> <span class="nu0">0x01</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span>prefix<span class="br0">)</span>
 
        <span class="co1"># Now must send the 3 colors</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span>blue<span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span>green<span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span>red<span class="br0">)</span>
 
    <span class="kw1">def</span> setColorRGB<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> led<span class="sy0">,</span> red<span class="sy0">,</span> green<span class="sy0">,</span> blue<span class="br0">)</span>:
        <span class="co1"># Send data frame prefix (32x '0')</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
 
        <span class="co1"># Send color data for each one of the leds</span>
        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">self</span>.__number_of_leds<span class="br0">)</span>:
            <span class="st0">'''
            if i == led:
                _led_state[i*3 + _CL_RED] = red;
                _led_state[i*3 + _CL_GREEN] = green;
                _led_state[i*3 + _CL_BLUE] = blue;
            sendColor(_led_state[i*3 + _CL_RED], 
                      _led_state[i*3 + _CL_GREEN], 
                      _led_state[i*3 + _CL_BLUE]);
            '''</span>
            <span class="kw2">self</span>.<span class="me1">sendColor</span><span class="br0">(</span>red<span class="sy0">,</span> green<span class="sy0">,</span> blue<span class="br0">)</span>
 
        <span class="co1"># Terminate data frame (32x "0")</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
        <span class="kw2">self</span>.<span class="me1">sendByte</span><span class="br0">(</span><span class="nu0">0x00</span><span class="br0">)</span>
 
 
<span class="co1"># Note: Use P9_22(UART2_RXD) and P9_21(UART2_TXD) as GPIO.</span>
<span class="co1"># Connect the Grove - Chainable RGB LED to UART Grove port of Beaglebone Green.</span>
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">"__main__"</span>:
    rgb_led <span class="sy0">=</span> ChainableLED<span class="br0">(</span>CLK_PIN<span class="sy0">,</span> DATA_PIN<span class="sy0">,</span> NUMBER_OF_LEDS<span class="br0">)</span>
 
    <span class="kw1">while</span> <span class="kw2">True</span>:
        <span class="co1"># The first parameter: NUMBER_OF_LEDS - 1; Other parameters: the RGB values.</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
        rgb_led.<span class="me1">setColorRGB</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span>
        <span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span></pre></div></div>
<p><b>Step4:</b> Save the file by clicking the disk icon and giving the file a name with the .py extension.
</p><p><b>Step5:</b> Connect Grove Chainable RGB LED to Grove UART socket on BBG.
</p><p><b>Step6:</b> Run the code.
You'll find the RGB LED is changing color every 2 seconds.
</p>
<h2>  Resources  </h2>
<ul><li><a href="http://garden.seeedstudio.com/images/a/a6/Chainable_RGB_LED_eagle_file.zip">Chainable RGB LED eagle file</a>
</li><li><a href="res/P9813_datasheet.pdf">P9813 datasheet</a>
</li><li><a href="https://github.com/pjpmarques/ChainableLED">Chainable RGB LED Library for the P9813</a>
</li><li><a href="https://github.com/Seeed-Studio/Grove_Chainable_RGB_LED">Github repository for Chainable RGB LED Library (new) </a>
</li><li>
</li></ul>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>