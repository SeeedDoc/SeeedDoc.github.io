<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - I2C Color Sensor</title><meta charset="utf-8"/><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84386732-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - I2C Color Sensor</h1>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><img src="img/I2C_Color_Sensor.jpg" width="400"/> <div class="thumbcaption"></div></div></div>
<p>This module is based on the color sensor TCS3414CS with digital output I2C. Based on the 8*2 array of filtered photodiodes and 16-bit analog-to-digital converters, you can measure the color chromaticity of ambient light or the color of objects. Of the 16 photodiodes, 4 have red filters, 4 have green filters, 4 have blue filters and 4 have no filter(clear). With the synchronization input pin, an external pulsed light source can provide precise synchronous conversion control.<br/>
</p><p><br/>
<a href="http://www.seeedstudio.com/depot/grove-i2c-color-sensor-p-854.html"><img src="../common/Get_One_Now_Banner.png" width="300"/></a>
</p><p><br/>
</p>
<p><br/>
</p>
<h2> Features </h2>
<ul><li> Grove compatible interface
</li><li> 16-Bit digital output with I2C
</li><li> SYNC Input Synchronizes Integration Cycle to Modulated Light Sources
</li><li> Operating temperature range -40°C to 85°C
</li><li> Programmable interrupt function with User-Defined Upper and lower threshold settings
</li><li> RoHS Compliant
</li></ul>
<p><br/>
</p>
<h2> Specification </h2>
<h3>  Specification  </h3>
<table>
<tr>
<th> Parameter </th>
<th> Value/Range
</th></tr>
<tr>
<td width="200"> PCB Size </td>
<td width="200"> 2.0 cm * 4.0 cm
</td></tr>
<tr>
<td> Interface </td>
<td> 2.0mm pitch pin header
</td></tr>
<tr>
<td> VCC </td>
<td> 3.3 - 6.0 V
</td></tr>
<tr>
<td> I2C Speed </td>
<td> 400 kHz
</td></tr></table>
<h3> Platforms Supported</h3>
<ul><li> Arduino
</li></ul>
<p><br/>
</p><p><br/>
</p>
<h2> Getting Started </h2>
<p>Following documents help in getting the user started with Grove. 
</p>
<ul><li> <a href="http://www.seeedstudio.com/document/pdf/Preface.pdf">Preface - Getting Started</a>
</li><li> <a href="http://www.seeedstudio.com/document/pdf/Introduction%20to%20Grove.pdf">Introduction to Grove</a>
</li></ul>
<p><br/>
</p>
<h3>  Hardware Connections  </h3>
<p>Grove products have an eco system and all have the same connector which can plug onto the <a href="/index.php-title=Base_shield_v2Anduselang=en">Base Shield</a>. Connect this module to the I2C port of Base Shield. However, you can also connect Grove - I2C Color Sensor to Arduino without Base Shield by jumper wires.<br/>
</p>
<table>
<tr>
<th> Arduino UNO </th>
<th> Grove - I2C Color Sensor
</th></tr>
<tr>
<td> 5V </td>
<td> VCC
</td></tr>
<tr>
<td> GND </td>
<td> GND
</td></tr>
<tr>
<td> SDA </td>
<td> SDA
</td></tr>
<tr>
<td> SCL</td>
<td> SCL
</td></tr></table>
<p><br/>
</p>
<h2> Software Installation </h2>
<dl><dd> <a href="/Download_Arduino_and_install_Arduino_driver">Download Arduino and install Arduino driver</a><br/>
</dd><dd> <a href="/Getting_Started_with_Seeeduino">Getting Started with Seeeduino/Arduino</a><br/>
</dd></dl>
<h2> Demos </h2>
<p>This module can be used to detect the color of light source or the color of objects. When used to detect the color of the light source, the led switch should be turned off, and the light source should shine the sensor directly. When used to detect the color of things, the led should be on and you should put the object on the top of the enclosure closely. The theory of sensing the color of objects is Reflective Sensing Theory. Like the picture below.
</p><p><br/>
</p><p><img src="img/Reflcect.jpg" width="400"/>
</p><p><br/>
</p>
<h3>  Color Sensor Library </h3>
<p>We have created a library to help you start playing quickly with the Seeeduino/Arduino, in this section we'll show you how to set up the library.
</p>
<h4>  Setup </h4>
<ol><li> <i><a href="https://github.com/Seeed-Studio/Grove_I2C_Color_Sensor">Download the library code as a zip file from the Grove_I2C_Color_Sensor github page.</a></i>
</li><li> <i>Unzip the downloaded file into your …/arduino/libraries.</i>
</li><li> <i>Rename the unzipped folder "Color_Sensor"</i>
</li><li> <i>Start the Arduino IDE (or restart if it is open).</i>
</li></ol>
<h4>  Description of function </h4>
<p>This is the most important/useful function in the library, we invite you to look at the .h and .cpp files yourself to see all the functions available.
</p>
<h5>   Read RGB data through the library function </h5>
<li><b>readRGB(int *red, int *green, int *blue)</b>
<ul>
<li><b>red:</b> The variable address to save R.</li>
<li><b>green:</b> The variable address to save G.</li>
<li><b>blue:</b> The variable address to save B.</li>
</ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">int</span> red, green, blue<span class="sy4">;</span>
    GroveColorSensor colorSensor<span class="sy4">;</span>
    colorSensor.<span class="me1">ledStatus</span> <span class="sy1">=</span> <span class="nu0">1</span><span class="sy4">;</span>            <span class="co1">// When turn on the color sensor LED, ledStatus = 1; When turn off the color sensor LED, ledStatus = 0.</span>
    <span class="kw1">while</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>
    <span class="br0">{</span>
        colorSensor.<span class="me1">readRGB</span><span class="br0">(</span><span class="sy3">&amp;</span>red, <span class="sy3">&amp;</span>green, <span class="sy3">&amp;</span>blue<span class="br0">)</span><span class="sy4">;</span>    <span class="co1">//Read RGB values to variables.</span>
        <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">300</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"The RGB value are: RGB( "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>red,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">", "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>green,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">", "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>blue,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">" )"</span><span class="br0">)</span><span class="sy4">;</span>
        colorSensor.<span class="me1">clearInterrupt</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<h3> Color Sensor Examples/Applications</h3>
<p>This example shows how to use features of Grove - I2C Color Sensor and display the detected color with a <a href="/Grove-Chainable_RGB_LED">Chainable RGB LED Grove</a> .<br/>
<font color="Blue"><b>Notice</b>: If you haven't downloaded <a href="https://github.com/Seeed-Studio/Grove_Chainable_RGB_LED">Grove-Chainable RGB LED library</a> to your Arduino IDE before, please download and set up the library first.</font>
</p>
<ul><li> Open File-&gt;Examples-&gt;Color_Sensor-&gt;example-&gt;ColorSensorWithRGB-LED sketch for a complete example, or copy and paste code below to a new Arduino sketch. <br/>
</li></ul>
<p><b>Description</b>: This example can measure the color chromaticity of ambient light or the color of objects, and via Chainable RGB LED Grove, display the detected color.<br/>
You also can use other display modules to display the detected color by Grove - I2C Color Sensor.
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;Wire.h&gt;</span>
<span class="co2">#include &lt;GroveColorSensor.h&gt;</span>
<span class="co2">#include &lt;ChainableLED.h&gt;</span>
 
<span class="co2">#define CLK_PIN   7</span>
<span class="co2">#define DATA_PIN  8</span>
<span class="co2">#define NUM_LEDS  1            //The number of Chainable RGB LED</span>
 
ChainableLED leds<span class="br0">(</span>CLK_PIN, DATA_PIN, NUM_LEDS<span class="br0">)</span><span class="sy4">;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Wire</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">int</span> red, green, blue<span class="sy4">;</span>
    GroveColorSensor colorSensor<span class="sy4">;</span>
    colorSensor.<span class="me1">ledStatus</span> <span class="sy1">=</span> <span class="nu0">1</span><span class="sy4">;</span>            <span class="co1">// When turn on the color sensor LED, ledStatus = 1; When turn off the color sensor LED, ledStatus = 0.</span>
    <span class="kw1">while</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span>
    <span class="br0">{</span>
        colorSensor.<span class="me1">readRGB</span><span class="br0">(</span><span class="sy3">&amp;</span>red, <span class="sy3">&amp;</span>green, <span class="sy3">&amp;</span>blue<span class="br0">)</span><span class="sy4">;</span>    <span class="co1">//Read RGB values to variables.</span>
        <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">300</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"The RGB value are: RGB( "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>red,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">", "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>green,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">", "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>blue,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">" )"</span><span class="br0">)</span><span class="sy4">;</span>
        colorSensor.<span class="me1">clearInterrupt</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span>NUM_LEDS<span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">)</span>
        <span class="br0">{</span>
            leds.<span class="me1">setColorRGB</span><span class="br0">(</span>i, red, green, blue<span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<ul><li>Upload the code to the development board.<br/>
</li><li>Then Grove_-_Chainable_RGB_LED would display the color which is detected.
</li></ul>
<p><br/>
</p><p><br/>
<br/>
</p>
<h2>  Other Reference </h2>
<p>This module is based on the color sensor TCS3414CS. The TCS3414CS digital color sensor returns data from four channels: red(R), green(G), blue(B) and clear(C)(non-filtered). The response from the red, green and blue channels (RGB) can be used to determine a particular source’s chromaticity coordinates (x, y). These standards are set by the Commission Internationale de l’Eclairage (CIE). The CIE is the main international organization concerned with color and color measurement.In order to acquire the color of a given object using TCS3414CS, we must first map the sensor response (RGB) to the CIE tristimulus values (XYZ). It is then necessary to calculate the chromaticity coordinates (x, y). <br/>
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:402px;"><img src="img/Coordinates_transform.png" width="400"/> <div class="thumbcaption">Chromaticity Calculation Process Overview</div></div></div>
<p><br clear="all"/>
</p>
The equations to do the transformation: <br/><div class="thumb tleft"><div class="thumbinner" style="width:402px;"><img src="img/Equations.png" width="400"/> <div class="thumbcaption">Transformation Equations</div></div></div><br clear="all"/>
<ul><li>When we get coordinates (x, y), please reference the below figure so as to get the recommended color.
</li></ul>
<pre><br/>   
 <img src="img/Chromaticity_Diagram.jpg" width="410"/>
</pre>
<p><br/>
</p>
<h2> Resources </h2>
<ul><li> <a href="https://github.com/Seeed-Studio/Grove_I2C_Color_Sensor">Library Grove - I2C Color Sensor</a>
</li><li> <a href="res/Twig-I2C_Color_sensor_v0.9b_eagle_files.zip">Grove-I2C Color Sensor Eagle File</a><br/>
</li><li> <a href="res/TCS3404_TCS3414-A.pdf">TCS3414-A Datasheet</a>
</li><li>
</li></ul>
<p><br/>
</p>
<h2> Help us to make it better </h2>
<p><iframe frameborder="0" height="500" src="https://www.surveymonkey.com/r/LY2JD7Q" width="500"></iframe>
</p>
</li>Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>