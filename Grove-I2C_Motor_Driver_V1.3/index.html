<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Grove I2C Motor Driver V1.3 - Seeed Wiki</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Grove I2C Motor Driver V1.3";
    var mkdocs_page_input_path = "Grove-I2C_Motor_Driver_V1.3.md";
    var mkdocs_page_url = "/Grove-I2C_Motor_Driver_V1.3/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Seeed Wiki</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_BLE/">Arch BLE</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_GPRS_V2/">Arch GPRS V2</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_Link/">Arch Link</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_Max_v1.1/">Arch Max v1.1</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_Pro/">Arch Pro</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arch_V1.1/">Arch V1.1</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Arduino_IDE_for_RePhone_Kit/">Arduino IDE for RePhone Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Battery_Detector_with_Polymer_Lithium_Ion_1050mAh_3.7V/">Battery Detector with Polymer Lithium Ion 1050mAh 3.7V</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Battery_Detector_with_Polymer_Lithium_Ion_5100mAh_3.8V/">Battery Detector with Polymer Lithium Ion 5100mAh 3.8V</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../BeagleBone_Green_HDMI_Cape/">BeagleBone Green HDMI Cape</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Beagle_Bone_Green_and_Grove_IoT_Starter_Kit_Powered_by_AWS/">Beagle Bone Green and Grove IoT Starter Kit Powered by AWS</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../EL_Shield/">EL Shield</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Energy_Shield/">Energy Shield</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-125KHz_RFID_Reader/">Grove 125KHz RFID Reader</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-2-Coil_Latching_Relay/">Grove 2 Coil Latching Relay</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-3-Axis_Analog_Accelerometer/">Grove 3 Axis Analog Accelerometer</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-3-Axis_Compass_V1.0/">Grove 3 Axis Compass V1.0</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-3-Axis_Digital_Accelerometer-1.5g/">Grove 3 Axis Digital Accelerometer 1.5g</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-3-Axis_Digital_Accelerometer-400g/">Grove 3 Axis Digital Accelerometer 400g</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-3-Axis_Digital_Gyro/">Grove 3 Axis Digital Gyro</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-315MHz_RF_Kit/">Grove 315MHz RF Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-4-Digit_Display/">Grove 4 Digit Display</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-433MHz_Simple_RF_Link_Kit/">Grove 433MHz Simple RF Link Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-6-Axis_AccelerometerAndCompass_V2.0/">Grove 6 Axis AccelerometerAndCompass V2.0</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Alcohol_Sensor/">Grove Alcohol Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Barometer-High-Accuracy/">Grove Barometer High Accuracy</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Barometer_Sensor-BMP180/">Grove Barometer Sensor BMP180</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Barometer_Sensor-BMP280/">Grove Barometer Sensor BMP280</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Barometer_Sensor/">Grove Barometer Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-EL_Driver/">Grove EL Driver</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-EMG_Detector/">Grove EMG Detector</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-FM_Receiver/">Grove FM Receiver</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-GSR_Sensor/">Grove GSR Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Gas_Sensor-MQ2/">Grove Gas Sensor MQ2</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Gas_Sensor-MQ3/">Grove Gas Sensor MQ3</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Gas_Sensor-MQ5/">Grove Gas Sensor MQ5</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Gas_Sensor-MQ9/">Grove Gas Sensor MQ9</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Gas_Sensor/">Grove Gas Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Hall_Sensor/">Grove Hall Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-High_Temperature_Sensor/">Grove High Temperature Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-I2C_FM_Receiver/">Grove I2C FM Receiver</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-I2C_Hub/">Grove I2C Hub</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-I2C_Motor_Driver/">Grove I2C Motor Driver</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Grove I2C Motor Driver V1.3</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#grove-i2c-motor-driver-v13">Grove - I2C Motor Driver V1.3</a></li>
                
                    <li><a class="toctree-l4" href="#introduction">Introduction</a></li>
                
                    <li><a class="toctree-l4" href="#version-tracker">Version Tracker</a></li>
                
                    <li><a class="toctree-l4" href="#features">Features</a></li>
                
                    <li><a class="toctree-l4" href="#specifications">Specifications</a></li>
                
                    <li><a class="toctree-l4" href="#hardware-overview">Hardware Overview</a></li>
                
                    <li><a class="toctree-l4" href="#application-ideas">Application Ideas</a></li>
                
                    <li><a class="toctree-l4" href="#usage">Usage</a></li>
                
                    <li><a class="toctree-l4" href="#function-reference">Function Reference</a></li>
                
                    <li><a class="toctree-l4" href="#resources">Resources</a></li>
                
                    <li><a class="toctree-l4" href="#help-us-make-it-better">Help us make it better</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-I2C_Touch_Sensor/">Grove I2C Touch Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-IMU_10DOF/">Grove IMU 10DOF</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-NFC_Tag/">Grove NFC Tag</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Speaker/">Grove Speaker</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Switch-P/">Grove Switch P</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Touch_Sensor/">Grove Touch Sensor</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Grove-Variable_Color_LED/">Grove Variable Color LED</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Linkit_Connect_7681/">Linkit Connect 7681</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../RS232_Shield/">RS232 Shield</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Raspberry_Pi_Breakout_Board_v1.0/">Raspberry Pi Breakout Board v1.0</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Raspberry_Pi_R232_Board_v1.0/">Raspberry Pi R232 Board v1.0</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../UartSBee_v5/">UartSBee v5</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Wio_Link_Bootcamp_Kit/">Wio Link Bootcamp Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Wio_Link_Environment_Kit/">Wio Link Environment Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Wio_Link_Event_Kit/">Wio Link Event Kit</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../Wio_Link_Starter_Kit/">Wio Link Starter Kit</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Seeed Wiki</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Grove I2C Motor Driver V1.3</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <!-- 
+++
title       = "Grove - I2C Motor Driver V1.3"
+++
 -->

<h1 id="grove-i2c-motor-driver-v13">Grove - I2C Motor Driver V1.3</h1>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2CMotorDriver_New.jpg" /></p>
<h2 id="introduction">Introduction</h2>
<p>The Grove - I2C Motor Driver V1.3 (latest version) can directly control Stepper Motor or DC Motor. Its heart is a dual channel H-bridge driver chip（L298N）that can handle current up to 2A per channel, controlled by an Atmel ATmega8L which handles the I2C communication with for example an Arduino. Both motors can be driven simultaneously while set to a different speed and direction. It can power two brushed DC motors or one 4-wire two-phase stepper motor. It requires a 6V to 15V power supply to power the motor and has an onboard 5V voltage regulator which can power the I2C bus and the Arduino(selectable by jumper). All driver lines are protected by diodes from back-EMF.</p>
<p>Contrast to the <a href="../Grove-I2C_Motor_Driver_V1.2">Grove - I2C motor driver V1.2</a>, the V1.3 enables users to control the stepper more easily. You do not need to control the steppers all the time anymore, simply send a command to I2C motor driver V1.3 to drive a stepper, and it will act as your command, which would save your Arduino resource and simplify your code.</p>
<p><a href="http://www.seeedstudio.com/Grove-I2C-Motor-Driver-p-907.html"><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/common/Get_One_Now_Banner.png" /></a></p>
<h2 id="version-tracker">Version Tracker</h2>
<table>
<thead>
<tr>
<th>Revision</th>
<th>Descriptions</th>
<th>Release</th>
</tr>
</thead>
<tbody>
<tr>
<td>v1.0</td>
<td>Initial public release</td>
<td>May 17th, 2012</td>
</tr>
<tr>
<td>v1.2</td>
<td>Modify the I2C address set by hardware</td>
<td>July 2nd, 2012</td>
</tr>
<tr>
<td>v1.3</td>
<td>Modify the firmware to support off-line Stepper</td>
<td>Feb 18th, 2013</td>
</tr>
</tbody>
</table>
<h2 id="features">Features</h2>
<ul>
<li>Grove Compatible</li>
<li>I2C Interface</li>
<li>Adjustable motor speed and rotation direction</li>
<li>Changeable slave address by hardware</li>
</ul>
<h2 id="specifications">Specifications</h2>
<table border="1" cellspacing="0" width="80%">
<tr>
<th scope="col">
Item
</th>
<th scope="col">
Min
</th>
<th scope="col">
Typical
</th>
<th scope="col">
Max
</th>
<th scope="col">
Unit
</th>
</tr>
<tr>
<th scope="row">
Working Voltage
</th>
<td>
6
</td>
<td align="center" >
-
</td>
<td>
15
</td>
<td>
VDC
</td>
</tr>
<tr>
<th scope="row">
Max Output Current per channel
</th>
<td colspan="3" align="center">
0.5
</td>
<td>
A
</td>
</tr>
<tr>
<th scope="row">
Maximum Total current
</th>
<td colspan="3" align="center" >
1.0
</td>
<td>
A
</td>
</tr>
<tr>
<th scope="row">
Input/output voltage on I2C bus
</th>
<td colspan="3" align="center" >
5
</td>
<td>
V
</td>
</tr>
<tr>
<th scope="row">
Communication protocol
</th>
<td colspan="3" align="center" >
I2C
</td>
<td>
/
</td>
</tr>
</table>

<h2 id="hardware-overview">Hardware Overview</h2>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2CMotorDriver-1.jpg" />
<strong>78M05 IC:</strong> 5V voltage regulator</p>
<p><strong>L298 IC:</strong> Dual full bridge driver</p>
<p><strong>ATmega8 IC:</strong> Control Motor Rotate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
Input voltage on screw terminals is regulated to 5V and connected to I2C +5V via a jumper (J4). Remove jumper if both external power via the screw terminals and power via the I2C header are used. Use jumper if 5V should be supplied to the I2C bus.
</div>

<h2 id="application-ideas">Application Ideas</h2>
<ul>
<li>Robots</li>
<li>Homebuilt RC cars</li>
<li>Case fans</li>
<li>High power LED illumination</li>
</ul>
<div class="admonition danger">
<p class="admonition-title">Caution</p>
The board will be very hot while operating over 1Amp. Do keep your hands off!
</div>

<h2 id="usage">Usage</h2>
<p>The I2C Motor Driver can control motor which is based on the chip L298. The L298 isn’t just a dual motor driver, it is a dual H-bridge. An h-bridge is basically a specific setup of transistors that allow you to switch direction of current. Hooking up to a motor means you can have it spin in both directions; and with PWM input, you can use your Arduino to make them spin at any speed. Because the L298 has 2 H-bridges, you can make a robot turn around by spinning each wheel in different directions, and of course go forwards and backwards.</p>
<p>Now, let us use the I2C Motor Driver to control two DC motors or a stepper rotating clockwise and anticlockwise.</p>
<h3 id="set-the-address-of-the-i2c-motor-driver">Set the address of the I2C Motor Driver</h3>
<ul>
<li>Set the address by dial switch is a new function added to the new I2C Motor Driver.</li>
</ul>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2CMotorDriver-9.jpg" /></p>
<ul>
<li>Then keep the address setup in the program the same as the address setup on the I2C motor driver. The default address setup in the program is 0x0f.</li>
</ul>
<!-- -->

<pre><code>#define I2CMotorDriverAdd         0x0f   // Set the address of the I2CMotorDriver
</code></pre>
<h3 id="how-to-drive-2-dc-motors">How to drive 2 DC motors</h3>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2CMotorDriver-4.jpg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
The first thing to notice however, is that you need an external power source for your DC motors. The 5V pin on the Arduino cannot provide enough power to drive 2 motors, you may damage your Arduino if you do so.
</div>

<p>And then program your Arduino as below:</p>
<pre><code>#include &lt;Wire.h&gt;
     .......
     .......
    &lt; Driver functions &gt;
     .......
     .......
void setup()  {
  Wire.begin(); // join i2c bus (address optional for master)
  delayMicroseconds(10000); //wait for motor driver to initialization
}
 
void loop()  {
  while(1)  {
    MotorSpeedSetAB(100,20);
    delay(10); //this delay needed
    MotorDirectionSet(0b1010);  //0b1010  Rotating in the positive direction 
    delay(1000); 
    MotorDirectionSet(0b0101);  //0b0101  Rotating in the opposite direction
    delay(500);
  }
}
</code></pre>

<p>In this program, Arduino first set the speed of the 2 DC motors with the <em>MotorSpeedSetAB()</em>command, and then set the DC motors work directions with <em>MotorDirectionSet()</em> command. please refer to the <a href="../Grove-I2C_Motor_Driver_V1.3#function-reference">Function Reference</a> for details, you can download all the demo code in the <a href="../Grove-I2C_Motor_Driver_V1.3#resources">Resources</a>.</p>
<h3 id="how-to-drive-a-stepper-using-i2c-motor-driver-v13">How to drive a stepper using I2C motor driver V1.3</h3>
<p>As the upgraded version of <a href="../Grove-I2C_Motor_Driver_V1.2">I2C motor DriverV1.2</a>, You can drive stepper via 2 methods for I2C motor driver V1.3.</p>
<p><strong>1. Control the stepper directly by Arduino</strong>
The I2C motor Driver can also be used to drive a 4-wire stepper. Connect your stepper to the output pins of I2C motor driver, and then connect motor driver to your Arduino/Seeeduino with I2C bus. Program your Arduino as below:</p>
<pre><code>#include &lt;Wire.h&gt;
     .......
     .......
    &lt; Driver functions &gt;
     .......
     .......
void setup()  {
  Wire.begin(); // join i2c bus (address optional for master)
  delayMicroseconds(10000); //wait for motor driver to initialization
}
 
void loop()  {
 while(1)  {
    MotorSpeedSetAB(100,100);//when driving a stepper, the speed should be set to 100;
    delay(10);
    MotorDirectionSet(0b0001);
    delay(4);
      MotorDirectionSet(0b0011);
    delay(4);  
    MotorDirectionSet(0b0010);
    delay(4);
      MotorDirectionSet(0b0110);
    delay(4);  
    MotorDirectionSet(0b0100);
    delay(4);  
    MotorDirectionSet(0b1100);
    delay(4);
      MotorDirectionSet(0b1000);
    delay(4);
      MotorDirectionSet(0b1001);
    delay(4);
  }
}
</code></pre>

<p>This connected 4-wire stepper will rotate; you can adjust the rotation speed or step number in your Arduino program. You can also use some other stepper libraries to control it. For all the demo code please refer to <a href="../Grove-I2C_Motor_Driver_V1.3#resources">Resources</a>.</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/2.gif" /></p>
<p><strong>2. Control the Stepper using the I2C motor Driver V1.3 on-chip ATmega8L.
</strong> Take <a href="http://www.seeedstudio.com/depot/high-quality-stepper-motor-12v-p-335.html?cPath=170_171">24BYJ48</a> as an example, The hardware installation as shown below:</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2C_Motor_Driver_control_a_Stepper_Motor.jpg" /></p>
<p>The connection between 24BYJ48 Stepper Motor and I2C Motor Driver is as shown below:</p>
<p><img alt="" src="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/img/I2C_Motor_Driver_Connector.jpg" /></p>
<p>Download the <a href="../Grove-I2C_Motor_Driver_V1.3#resources">Grove-I2C motor driver V1.3 demo code</a>, and open the <em>StepperControlMode2.ino</em>:</p>
<pre><code class="de1">#include &lt;Wire.h&gt;
#define MotorSpeedSet             0x82
#define PWMFrequenceSet           0x84
#define DirectionSet              0xaa
#define MotorSetA                 0xa1
#define MotorSetB                 0xa5
#define Nothing                   0x01
#define EnableStepper             0x1a
#define UnenableStepper           0x1b
#define Stepernu                  0x1c
#define I2CMotorDriverAdd         0x0f   // Set the address of the I2CMotorDriver
// set the steps you want, if 255, the stepper will rotate continuously;
void SteperStepset(unsigned char stepnu)
{
  Wire.beginTransmission(I2CMotorDriverAdd); // transmit to device I2CMotorDriverAdd
  Wire.write(Stepernu);          // Send the stepernu command 
  Wire.write(stepnu);            // send the steps
  Wire.write(Nothing);           // send nothing   
  Wire.endTransmission();        // stop transmitting 
}
     .......
     .......
     .......
     .......
void stepperrun()
{
 Serial.println(&quot;sent command to + direction, very fast&quot;);
 SteperStepset(255);
 StepperMotorEnable(1, 1);// ennable the i2c motor driver a stepper. 
  delay(5000);
  Serial.println(&quot;sent command to - direction, slow&quot;);
  SteperStepset(255);
  StepperMotorEnable(0, 20);
  delay(5000);
   Serial.println(&quot;sent command to - direction, fast&quot;);
  StepperMotorEnable(0, 2);// ennable the i2c motor driver a stepper. 
  delay(5000);
 Serial.println(&quot;sent command to + direction,100 steps, fast&quot;);
 SteperStepset(100);
  StepperMotorEnable(1,5);
 delay(3000);
 
 Serial.println(&quot;sent command to shut down the stepper&quot;);
 StepperMotorUnenable();
 delay(1000);
 
  Serial.println(&quot;sent command to - direction, slow, and 10 steps then stop&quot;);
 SteperStepset(10);
 StepperMotorEnable(0,40);
 delay(5000);
 Serial.println(&quot;sent command to shut down the stepper&quot;);
 StepperMotorUnenable();
 delay(5000);
}
void setup()  {
  Wire.begin(); // join i2c bus (address optional for master)
  delayMicroseconds(10000);
  Serial.begin(9600);
  Serial.println(&quot;setup begin&quot;);
  stepperrun();
}
void loop()  {
 
}
</code></pre>

<p>In this demo code, Arduino sends stepper-control command to I2C motor driver via I2C bus, with SteperStepset() to set the step number, and StepperMotorEnable() to set the direction and speed. Please refer to the <a href="../Grove-I2C_Motor_Driver_V1.3#function-reference">Function Reference</a> for the details.</p>
<p>Note that if you have I2C motor driver V1.2 and want to use the off-line Stepper control methods, you will need to upgrade your firmware in your V1.2 motor driver with a <a href="http://www.seeedstudio.com/depot/atmel-avrisp-stk500-usb-isp-programmer-p-207.html?cPath=132_135">AVRISP</a> and upload the .hex file to your I2C motor driver. Please download the .hex file and source code and related tips in the <a href="../Grove-I2C_Motor_Driver_V1.3#resources">Resources</a>. </p>
<h2 id="function-reference">Function Reference</h2>
<p><strong>1. void SteperStepset(unsigned char stepnu)</strong></p>
<p><em>Description: Set the steps you want.</em></p>
<p><em>stepnu: the Parameter can be 1~255. if 255, the stepper will rotate continuously;</em></p>
<p>Usage:</p>
<pre><code>Serial.println("sent command to + direction,100 steps, fast");
SteperStepset(100);
</code></pre>
<p><strong>2. void StepperMotorEnable(unsigned char Direction, unsigned char motorspeed)</strong></p>
<p><em>Description: Enable the IIC motor driver to drive a 4-wire stepper.</em></p>
<p><em>Direction: Stepper direction 1/0</em></p>
<p><em>motorspeed: defines the time interval the i2C motor driver, Change it output to drive the stepper. The actual interval time is : motorspeed * 4ms. That is , When motor speed is 10, the interval time would be 40 ms.</em></p>
<p>Usage:</p>
<pre><code>StepperMotorEnable(1, 1);// enable the i2c motor driver a stepper.
</code></pre>
<p><strong>3. void StepperMotorUnenable()</strong></p>
<p><em>Description: Uneanble IIC motor drive to drive the stepper.</em></p>
<p>Usage:</p>
<pre><code>StepperMotorUnenable();
</code></pre>
<p><strong>4. void MotorSpeedSetAB(unsigned char MotorSpeedA , unsigned char MotorSpeedB)</strong></p>
<p><em>Description: defines the speed of motor 1 and motor 2</em></p>
<p><em>MotorSpeedA: the DC motor A speed, should be 0~100;</em></p>
<p><em>MotorSpeedB: the DC motor B speed, should be 0~100;</em></p>
<p>Usage:</p>
<pre><code>Serial.println("sent DC speed 100");
MotorSpeedSetAB(100,100);//defines the speed of motor 1 and motor 2;
delay(10); //this delay needed
</code></pre>
<p><strong>5. void MotorPWMFrequenceSet(unsigned char Frequence)</strong></p>
<p><em>Description:set the prescale frequency of PWM, 0x03 default</em></p>
<p><em>Frequency: the prescale frequency of PWM</em></p>
<p><strong>6. void MotorDirectionSet(unsigned char Direction)</strong></p>
<p><em>Description: Adjust the direction of the motors</em></p>
<p><em>Direction:can be Forward/Reverse rotating.</em></p>
<p>Usage:</p>
<pre><code>MotorDirectionSet(0b1010);  //"0b1010" defines the output polarity, "10" means the M+ is "positive" while the M- is "negative"
                         // make sure M+ and M- is different polarity when driving DC motors.
delay(1000); 
MotorDirectionSet(0b0101);  //0b0101  Rotating in the opposite direction
delay(500);
</code></pre>
<p><strong>7. void MotorDriectionAndSpeedSet(unsigned char Direction,unsigned char MotorSpeedA,unsigned char MotorSpeedB)</strong></p>
<p><em>Description: Adjust the direction and speed altogether.</em></p>
<h2 id="resources">Resources</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/res/Grove-I2C_Motor_Driver_v1.3_Eagle_File.zip">Grove - I2C Motor Driver V1.3 Eagle File</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/res/I2CMotorDriverDemoCodeV13.zip">I2C Motor DriverV13 Demo Code</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/res/L298datasheet.pdf">L298 Datasheet</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/res/ST_78M05DataSheet.pdf">78M05 Datasheet</a></li>
<li><a href="https://raw.githubusercontent.com/SeeedDoc/WikiMigrationSync/master/docs/assets/Grove-I2C_Motor_Driver_V1.3/res/On-Chipfirmware_for_Motor_driver.zip">On-Chip Firmware for I2C motor driver</a></li>
</ul>
<h2 id="help-us-make-it-better">Help us make it better</h2>
<iframe frameborder="0" height="500" src="https://www.surveymonkey.com/r/WZBCB86" width="500"></iframe>

<!-- 
+++
oldwikiurl       = "http://www.seeedstudio.com/wiki/Grove_-_I2C_Motor_Driver_V1.3"
+++
 -->

<!-- This Markdown file was created from http://www.seeedstudio.com/wiki/Grove_-_I2C_Motor_Driver_V1.3 -->
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Grove-I2C_Touch_Sensor/" class="btn btn-neutral float-right" title="Grove I2C Touch Sensor">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Grove-I2C_Motor_Driver/" class="btn btn-neutral" title="Grove I2C Motor Driver"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Grove-I2C_Motor_Driver/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Grove-I2C_Touch_Sensor/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
