<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - Electricity Sensor</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - Electricity Sensor</h1>

<p>The Electricity sensor module is a member of Grove. It is based on the TA12-200 current transformer which can transform the large  AC into  small amplitude. You can use it to test large alternating current up to 5A. 
</p><p>Model:<a href="http://www.seeedstudio.com/depot/grove-electricity-sensor-p-777.html?cPath=144_154">SEN23931P</a>
</p><p><img src="img/Twig-Electricity-Sensor.jpg" width="400"/>
</p>
<h2>  Features  </h2>
<ul><li>Grove compatible interface 
</li><li>Maximum 5A input 
</li><li>High accuracy 
</li><li>Small size
</li></ul>
<h2>  Application Ideas  </h2>
<ul><li>Alternating current measurement 
</li><li>Device condition monitoring
</li></ul>
<h2>  Specification </h2>
<h3>  Key Specification  </h3>
<table >
<tr>
<td width="400"> <b>Items</b>
</td>
<td width="400"> <b>Min</b>
</td></tr>
<tr style="font-size: 90%">
<td> PCB Size
</td>
<td> 2.0cm*4.0cm
</td></tr>
<tr style="font-size: 90%">
<td> Interface
</td>
<td> 2.0mm pitch pin header
</td></tr>
<tr style="font-size: 90%">
<td> IO Structure
</td>
<td> SIG,NC,NC,GND
</td></tr>
<tr style="font-size: 90%">
<td> ROHS
</td>
<td> YES
</td></tr></table>
<h3>  Electronic Characteristics  </h3>
<table >
<tr>
<td width="300"> <b>Items</b>
</td>
<td width="100"> <b>Min</b>
</td>
<td width="100"> <b>Norm</b>
</td>
<td width="100"> <b>Max</b>
</td>
<td width="100"> <b>Unit</b>
</td></tr>
<tr>
<td> Transformation ratio
</td>
<td> -
</td>
<td> 2000:1
</td>
<td> -
</td>
<td> -
</td></tr>
<tr>
<td> Input Current
</td>
<td> 0
</td>
<td> -
</td>
<td> 5
</td>
<td> A
</td></tr>
<tr>
<td> Output Current
</td>
<td> 0
</td>
<td> -
</td>
<td> 2.5
</td>
<td> mA
</td></tr>
<tr>
<td> Sampling Resistance
</td>
<td> -
</td>
<td> 800
</td>
<td> -
</td>
<td> Ω
</td></tr>
<tr>
<td> Sampling Voltage
</td>
<td> 0
</td>
<td> -
</td>
<td> 2
</td>
<td> V
</td></tr>
<tr>
<td> Working Frequency
</td>
<td> 20
</td>
<td> -
</td>
<td> 20K
</td>
<td> HZ
</td></tr>
<tr>
<td> Nonlinear scale
</td>
<td> -
</td>
<td> -
</td>
<td> 0.2%
</td>
<td> -
</td></tr>
<tr>
<td> Phase Shift
</td>
<td> -
</td>
<td> -
</td>
<td> 5'
</td>
<td> -
</td></tr>
<tr>
<td> Operating Temperature
</td>
<td> -55
</td>
<td> -
</td>
<td> 85
</td>
<td> ℃
</td></tr>
<tr>
<td> Dielectric strength
</td>
<td> -
</td>
<td> 6
</td>
<td> -
</td>
<td> KVAC/1min
</td></tr></table>
<h2>  Usage </h2>
<h3> With <a href="/w/index.php?title=Arduino&amp;action=edit&amp;redlink=1" title="Arduino (page does not exist)">Arduino</a></h3>
<p>The following sketch demonstrates a simple application of measuring the amplitude of the alternating voltage.The SIG pin will output a alternating voltage based on the alternating current being measured. You can measure the value using ADC. 
</p>
<ul><li>Connect the module to the analog A0 of <a href="http://www.seeedstudio.com/depot/grove-base-shield-p-754.html?cPath=132_134">Grove - Base board</a>
</li><li>Put the alternating current wire through the hole of the current transformer.
</li></ul>
<p><img src="img/Grove-Electricity_Sensor_hardware.jpg" width="700"/><br/>
</p><p><br/>
</p>
<ul><li>Copy and paste code below to a new Arduino sketch. <br/>
</li></ul>
<pre>
/****************************************************************************/	
//	Function: Measure the amplitude current of the alternating current and 
//			  the effective current of the sinusoidal alternating current.
//	Hardware: Grove - Electricity Sensor		
//	Date: 	 Jan 19,2013
//	by www.seeedstudio.com
#define ELECTRICITY_SENSOR A0 // Analog input pin that sensor is attached to

float amplitude_current;               //amplitude current
float effective_value;       //effective current 

void setup() 
{
	Serial.begin(9600); 
	pins_init();
}
void loop() 
{
	int sensor_max;
	sensor_max = getMaxValue();
	Serial.print("sensor_max = ");
	Serial.println(sensor_max);
	//the VCC on the Grove interface of the sensor is 5v
	amplitude_current=(float)sensor_max/1024*5/800*2000000;
	effective_value=amplitude_current/1.414;//minimum_current=1/1024*5/800*2000000/1.414=8.6(mA) 
						//Only for sinusoidal alternating current
	Serial.println("The amplitude of the current is(in mA)");
	Serial.println(amplitude_current,1);//Only one number after the decimal point
	Serial.println("The effective value of the current is(in mA)");
	Serial.println(effective_value,1);
}
void pins_init()
{
	pinMode(ELECTRICITY_SENSOR, INPUT);
}
/*Function: Sample for 1000ms and get the maximum value from the SIG pin*/
int getMaxValue()
{
	int sensorValue;             //value read from the sensor
	int sensorMax = 0;
	uint32_t start_time = millis();
	while((millis()-start_time) &lt; 1000)//sample for 1000ms
	{
		sensorValue = analogRead(ELECTRICITY_SENSOR);
		if (sensorValue &gt; sensorMax) 
		{
			/*record the maximum sensor value*/
			sensorMax = sensorValue;
		}
	}
	return sensorMax;
}
</pre>
<ul><li>Upload the code, please click <a href="/Upload_Code">here</a> if you do not know how to upload.<br/>
</li></ul>
<p><b>Note:</b> The minimum effective current that can be sensed by the code can be calculated using the equation below. 
minimum_current=1/1024*5/800*2000000/1.414=8.6(mA).<br/>
</p>
<ul><li>Open the serial monitor, The results is as follows：<br/>
</li></ul>
<p><img src="img/Elecricity_Sensor.jpg" width="536"/>
</p>
<h3>  With <a href="/GrovePiPlus" title="GrovePi+">Raspberry Pi</a> </h3>
<p>1.You should have got a raspberry pi and a grovepi or grovepi+.<br/>
2.You should have completed configuring the development enviroment, otherwise follow <a href="/GrovePiPlus#Introducing_the_GrovePi.2B">here</a>.
<br/>
3.Connection
<br/>
</p>
<ul><li> Plug the sensor to grovepi socket A0 by using a grove cable.<br/>
</li></ul>
<p>4.Navigate to the demos' directory: <br/>
</p>
<pre>   cd yourpath/GrovePi/Software/Python/
</pre>
<ul><li> To see the code
</li></ul>
<pre>   nano grove_electricity_sensor.py   # "Ctrl+x" to exit #
</pre>
<pre>
import time
import grovepi

# Connect the Grove Electricity Sensor to analog port A0
# SIG,NC,NC,GND
sensor = 0

grovepi.pinMode(sensor,"INPUT")

# Vcc of the grove interface is normally 5v
grove_vcc = 5

while True:
    try:
        # Get sensor value
        sensor_value = grovepi.analogRead(sensor)

        # Calculate amplitude current (mA)
        amplitude_current = (float)(sensor_value / 1024 * grove_vcc / 800 * 2000000)

        # Calculate effective value (mA)
        effective_value = amplitude_current / 1.414

        # minimum_current = 1 / 1024 * grove_vcc / 800 * 2000000 / 1.414 = 8.6(mA)
        # Only for sinusoidal alternating current

        print "sensor_value", sensor_value
        print "The amplitude of the current is", amplitude_current, "mA"
        print "The effective value of the current is", effective_value, "mA"
        time.sleep(1)

    except IOError:
        print "Error"

</pre>
<p>5.Run the demo.<br/>
</p>
<pre>   sudo python grove_electricity_sensor.py
</pre>
<h2>  Resources </h2>
<ul><li><a href="res/Electricity_sensor_v1.0_eagle_files.zip">Grove -Electricity Sensor Eagle File</a>
</li><li><a href="res/Electricity_sensor_sch.pdf">Schematic in PDF</a>
</li><li>
</li></ul>
<h2>  Support  </h2>
<p>If you have questions or other better design ideas, you can go to our <a href="http://www.seeedstudio.com/forum">forum</a> or <a href="http://wish.seeedstudio.com">wish</a> to discuss.
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>