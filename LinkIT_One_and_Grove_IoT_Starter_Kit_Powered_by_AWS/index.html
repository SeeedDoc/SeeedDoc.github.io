<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>LinkIT One and Grove IoT Starter Kit Powered by AWS</title><meta charset="utf-8"/></head><body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>LinkIT One and Grove IoT Starter Kit Powered by AWS</h1><div class="thumb tright"><div class="thumbinner" style="width:502px;"><img src="img/Aws_linkit_cover.JPG" width="500"/> <div class="thumbcaption"></div></div></div>
<p><i>Primary reference: <a href="/Grove_IoT_Starter_Kits_Powered_by_AWS" title="Grove IoT Starter Kits Powered by AWS">Grove IoT Starter Kits Powered by AWS</a> , <a href="/LinkIt_ONE" title="LinkIt ONE">LinkIt ONE</a>, <a href="http://labs.mediatek.com/site/global/developer_tools/mediatek_linkit/hdk_intro/aws_kit/index.gsp">MediaTek AWS IoT Guide</a></i>
</p><p><b>LinkIt ONE</b> development board is an open source, high-performance development board for wearable and IoT product prototyping. It is based on MT2502 (ARM7EJ-S™ MCU) and integrates GSM, GPRS, Wi-Fi, Bluetooth BR/EDR/BLE, GPS, Audio decoder, and SD card connector on a single development board. The kit enables you to build up cloud computing connected projects that involve communications for smart cities, transportation and logistics.
</p><p>You can use AWS IoT to accomplish two key tasks: secured data and flexible tele-operations. Data is a key component of any IoT device. When sending data to the cloud, over a cellular or Wi-Fi network, you need to make the telemetry is confidential, this can be overcome by different security mechanism offered by AWS. With AWS Rule Engine, you can build a complete solution with other AWS services for your project. 
</p><p>With MediaTek LinkIt™ ONE and Grove IoT Starter Kit Powered by AWS, you can create powerful Wearables, bleeding edge IoT devices, send your device data to Amazon Web Services. The kit includes a collection of Grove sensors for gathering data and peripherals to acquire visual interface on your device. And by adopting the AWS Cloud, your business will benefit from its flexibility, scalability and pay on-your-demand.
</p><p><br/>
<a href="http://www.amazon.com/dp/B0168LBYWC"><img src="../common/Get_One_Now_Banner.png" width="300"/></a>
</p><p><br/>
</p>
<p><br/>
</p>
<h2> Included in the Box</h2>
<div class="thumb tright"><div class="thumbinner" style="width:502px;"><img src="img/Aws_kit_linkit.JPG" width="500"/> <div class="thumbcaption"></div></div></div>
<table>
<tr>
<th> Board/Part </th>
<th> Quantity </th>
<th> Documentation
</th></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/LinkIt-ONE-p-2017.html?cPath=122_142">LinkIt ONE</a> </td>
<td> 1 </td>
<td> <a href="/LinkIt_ONE" title="LinkIt ONE"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Base-Shield-V2-p-1378.html?cPath=98_16">Base Shield</a> </td>
<td> 1 </td>
<td> <a href="/Base_shield_v2" title="Base shield v2"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-3Axis-Digital-Accelerometer16g-p-1156.html?cPath=25_132">Grove - 3-Axis Digital Accelerometer(±16g)</a> </td>
<td> 1 </td>
<td> <a href="/Grove-3-Axis_Digital_Accelerometer_ADXL345" title="Grove - 3-Axis Digital Accelerometer ADXL345"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-Light-Sensor-p-746.html?cPath=25_27">Grove - Light Sensor</a> </td>
<td> 1 </td>
<td><a href="/Grove-Light_Sensor" title="Grove - Light Sensor"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-LED-Bar-v20-p-2474.html">Grove - LED Bar v2.0</a> </td>
<td> 1 </td>
<td><a href="/Grove-LED_Bar" title="Grove - LED Bar"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-Moisture-Sensor-p-955.html?cPath=25_27">Grove - Moisture Sensor</a> </td>
<td> 1 </td>
<td><a href="/Grove-Moisture_Sensor" title="Grove - Moisture Sensor"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-Touch-Sensor-p-747.html?cPath=85_94">Grove - Touch Sensor</a> </td>
<td> 1 </td>
<td><a href="/Grove-Touch_Sensor" title="Grove - Touch Sensor"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-Temperature-Sensor-p-774.html?cPath=25_125">Grove - Temperature Sensor</a> </td>
<td> 1 </td>
<td><a href="/Grove-Temperature_Sensor_V1.2" title="Grove - Temperature Sensor V1.2"> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-OLED-Display-112-p-781.html?cPath=34_36">Grove - OLED Display</a> 1.12’’</td>
<td> 1 </td>
<td><a href="/Grove-OLED_Display_0.96inch" title='Grove - OLED Display 0.96"'> Read Here</a>
</td></tr>
<tr>
<td><a href="http://www.seeedstudio.com/depot/Grove-Loudness-Sensor-p-1382.html?cPath=25_128">Grove - Loudness Sensor</a> </td>
<td> 1 </td>
<td><a href="/Grove-Loudness_Sensor" title="Grove - Loudness Sensor"> Read Here</a>
</td></tr>
<tr>
<td>Micro USB Cable - 48cm </td>
<td> 1 </td>
<td>
</td></tr></table>
<p><br/>
</p>
<h2> Features </h2>
<ul><li>Easy, complete and powerful development platform(LinkIt™ ONE).
</li><li><a href="/Grove_System">Grove system</a> with various functional modules.
</li><li>Confidential communication between you application(web application, mobile apps, or controlling device) and you remote devices(sensors, actuators, embedded devices, or smart appliances) through AWS authorization service.
</li><li>Leverage applications to AWS computing platform.
</li><li>For building function-rich, edging and fantasy applications belong to future.
</li></ul>
<p><br/>
</p>
<h2> Get started</h2>
<h3> Configuring Your AWS IoT Service</h3>
<p>At the very beginning, we need to get an AWS IoT service account, and do some configuring. 
</p>
<ul><li>Create an <a href="http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AMS5.0CreatingAnAWSAccount.html">AWS Account</a>
</li><li>Go to <a href="https://aws.amazon.com/iot/">AWS IoT Console</a> and open the AWS IoT Dashboard
</li></ul>
<dl><dd> 1. Click the <b>Services</b> on the top-left corner, and then click on AWS IoT, as shown at below image.
</dd><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_click_service.jpg" width="600"/>
</p>
<dl><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_click_iot.png" width="600"/>
</p>
<dl><dd> 2. Click <b>Get started</b> button.
</dd><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_click_get_started.jpg" width="600"/>
</p>
<dl><dd> 3. Click on <b>Create a Resource</b> and then click <b>Creat a thing</b>.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_click_create_a_thing.jpg" width="600"/>
</p>
<dl><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_view_a_thing.jpg" width="600"/>
</p>
<dl><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_name_a_thing.png" width="600"/>
</p>
<dl><dd> 4. Click on <b>Connect a device</b>.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_click_connect_a_thing.jpg" width="450"/>
</p>
<dl><dd> 5. Select <b>Embedded C</b> and Click on <b>Generate certificate</b> and policy. Click links to download keys and certificate which will be used later.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_select_SDK.png" width="600"/>
</p><p><img src="img/AWS_LinkIt_starter_kit_confirm_connecting_and_download_keys.jpg" width="600"/>
</p>
<dl><dd> 6. Then we will get some code as shown at below. Copy the code into an empty document. We will use these code later. Then click on Return to Thing Detail.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_pasting_code.jpg" width="600"/>
</p>
<h3> Setup your LinkIt ONE development environment</h3>
<p>This tutorial is under Windows(Windows 7 or above) system and Arduino IDE 1.5.7 with LinkIt SDK 1.1.17.
</p>
<ul><li><a href="https://www.arduino.cc/en/Main/OldSoftwareReleases#previous">Download Arduino IDE 1.5.7</a>
</li><li><a href="http://labs.mediatek.com/site/global/developer_tools/mediatek_linkit/sdk_intro/index.gsp">Download LinkIt SDK 1.1.17</a>
</li><li><a href="/LinkIt_ONE">How to install SDK and use LinkIt ONE</a>
</li><li><a href="/LinkIt_ONE#Updating_Firmware">Update firmware of LinkIt ONE to 1.1.17</a>
</li><li>Refer to <a href="http://labs.mediatek.com/site/global/developer_tools/mediatek_linkit/get-started/index.gsp">here</a> to build a development  environment.
</li></ul>
<p><b>Note</b>: This Version support Arduino IDE 1.5.7(And Arduino IDE 1.6.5) and LinkIt SDK 1.1.17 only.
</p>
<h3> Download example and run</h3>
<p>AWS IoT Services support for the LinkIt ONE development board enables secure communication between smart projects and Amazon's IoT optimized cloud. AWS IoT Services uses message broker(MQTT broker) and HTTP as its communication protocols. To support this on the LinkIt ONE development board the mbed TLS library for LinkIt ONE (a version of the mbed TLS library) is provided to offer Transport Layer Security (TLS). This library easily integrates with new and existing (embedded) applications and provides the building blocks for secure communication, cryptography, and key management.
</p><p><br/>
</p>
<ul><li>Download sketch <a href="https://github.com/loovee/aws_mbedtls_mqtt">here</a>
</li></ul>
<p><img src="img/AWS_LinkIt_starter_kit_download_sketch_github.jpg" width="600"/>
</p>
<ul><li>Then click <b>Download ZIP</b> to download the code. The code you downloaded is not an Arduino library, it's a sketchbook, which had included all the library the project need.
</li></ul>
<p>Unzip the file you had downloaded from Github, you will get a folder named aws_mbedtls_mqtt-master, remove “-master” in the file name.
</p>
<h3> Configure Arduino IDE</h3>
<dl><dd> 1. Open your Arduino IDE(1.5.7), click File &gt; Preferences &gt; Sketchbook Location, browse to the folder we had mentioned above - ArduinoPhone-master. Then click OK to save it.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_configure_arduino_IDE.jpg" width="600"/>
</p>
<dl><dd> 2. Close and relaunch Arduino IDE, click File &gt; Sketchbook &gt; aws_paho_shadow, then the code will be loaded. 
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_load_sketch.jpg" width="500"/>
</p>
<h3> Put key file into Storage of LinkIt ONE</h3>
<dl><dd> 1. The application development for AWS IoT Services is performed in the Arduino IDE. Before upload the sketch, add the certificates (.key or .crt files) created in section creating a certificate for a device or application communication into the LinkIt ONE development board's flash storage as follows.
</dd></dl>
<p>Switch it into Mass Storage mode, as shown below. You need to disconnect power if no new-plugged-driver exists on your desktop OS. 
</p><p><img src="img/AWS_LinkIt_starter_kit_connections.jpg" width="387"/>
</p>
<dl><dd> 2. Navigate to Computer, then Devices and Removable Storage. Open the removable disk drive corresponding to the LinkIt ONE development board.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_find_linkitone_storage.jpg" width="575"/>
</p>
<dl><dd> 3. Copy the keys and certificates files we download from AWS IoT into the disk. 
</dd></dl>
<p>And in the code we had downloaded, there's file named VeriSign-Class 3-Public-Primary-Certification-Authority-G5 (1).pem in \aws_mbedtls_mqtt\root_cert in, copy it to the Remove Disk as well, and rename it to root-CA.crt
<img src="img/AWS_LinkIt_starter_kit_find_keys_file.jpg" width="600"/>
</p><p>Then switch to UART mode( corner-most section of LinkIt ONE board).
</p>
<h3> Modify a little the code</h3>
<p>Click File&gt;Sketchbook&gt;aws_paho_shadow to open the code.
</p>
<dl><dd> 1. Find the code below at aws_paho_shadow.h.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_paste_code.jpg" width="580"/>
</p>
<dl><dd> 2. Recall to when we create a thing at AWS IoT:
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_pasting_code.jpg" width="600"/>
</p><p>Copy the code and replace it in <b>aws_paho_shadow.h</b>.
</p>
<dl><dd> 3. Configure your Wi-Fi AP:
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_configure_WIFI_access_info.jpg" width="580"/>
</p>
<dl><dd> 4. Run win+R, enter cmd, and <b>ping</b> the address of AWS_IOT_MQTT_HOST
</dd></dl>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1">ping A2DWFZYZMAZJGZ.<span class="me1">iot</span>.<span class="me1">us</span><span class="sy2">-</span>east<span class="sy2">-</span><span class="nu0">1</span>.<span class="me1">amazonaws</span>.<span class="me1">com</span></pre></div></div>
<p><b>Note</b> that You need to replace the <i>A2DWFZYZMAZJGZ.iot.us-east-1.amazonaws.com</i> with the constant <b>AWS_IOT_MQTT_HOST '</b>s value, which can find in the previously copied code.
</p><p><img src="img/AWS_LinkIt_starter_kit_pasting_code.jpg" width="600"/>
</p><p>You will get:
</p><p><img src="img/AWS_LinkIt_starter_kit_get_AWS_addr.jpg" width="600"/>
</p><p>And modify IP_ADDRESS(line 40) to this line of numbers. (Here is 54.164.100.76)
</p><p><img src="img/AWS_LinkIt_starter_kit_modify_IP_addr.jpg" width="580"/>
</p>
<h3> Hardware connection</h3>
<p><img src="img/AWS_LinkIt_starter_kit_demo_connection.jpg" width="600"/>
</p><p>Material required:
</p>
<ul><li><a href="/Grove-Base_shield_v2">Base Shield v2.0</a>, Set to 3V3(corner-most section of Base shield board)
</li><li><a href="/Grove-Touch_Sensor">Grove - Touch Sensor</a> connect to D6
</li><li><a href="/Grove-LED_Bar">Grove - LED Bar</a> connect to D2
</li></ul>
<h3> Upload code</h3>
<p><b>Tip:</b> refer to <a href="/Guide_to_use_demos_downloaded_from_Seeed-s_Github">here</a> for any library file(or header file) missing error prompted.
Connect you LinkIt ONE to PC, and remember to insert the Wi-Fi antenna first. Open your Device Manage, you will find there are 2 COM Ports:
</p>
<dl><dd>
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_find_COM_port.jpg" width="600"/>
</p><p>Click <b>Tools&gt;Board</b> and choose LinkIt ONE. Click Tool&gt;Ports and choost the number of MTK USB Debug Port. Finally, click Upload button to Upload the code.
</p><p><img src="img/AWS_LinkIt_starter_kit_flash_code_to_linkitone.jpg" width="580"/>
</p><p><br/>
<img src="img/AWS_LinkIt_starter_kit_upload_code_down.jpg" width="580"/>
</p>
<h3> Check the output</h3>
<p><b>Note</b> that you have to set antenna connected. Refer to <a href="/LinkIt_ONE#Connecting_Antennae">here</a>.
</p>
<dl><dd> 1. Change Arduino IDE Ports to MTK USB Moden Port, and open the Serial Monitor and set baud rate to 9600.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_open_serial_port.png" width="600"/>
</p>
<dl><dd> 2. When you got <i><b>...X.509 certificazte... ok</b></i>, it means your device had connected to AWS successful. If there's something wrong, please re-power LinkIt ONE and try again.  
</dd></dl>
<p>Then let's open AWS IoT website, sign in to your account. And click the thing you created minutes ago:
</p><p><img src="img/AWS_LinkIt_starter_kit_return_to_AWS.png" width="600"/>
</p><p>You will find a control panel on the right side. 
</p><p><img src="img/AWS_LinkIt_starter_kit_create_rule_in_AWS_console.png" width="432"/>
</p><p>You can check the status of Touch Sensor now. Try press the Touch Sensor, and update it. 
</p><p><img src="img/AWS_LinkIt_starter_kit_change_state.png" width="359"/>
</p>
<dl><dd> 3. You will find the status of Touch had changed. Then let's try to control the LED Bar. Click Update shadow.
</dd></dl>
<p><img src="img/AWS_LinkIt_starter_kit_update_shadow.png" width="443"/>
</p>
<dl><dd> 4. And replace the code with below code(replace all existing code):
</dd></dl>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1">    <span class="br0">{</span>
      <span class="st0">"desired"</span><span class="sy4">:</span> <span class="br0">{</span>
        <span class="st0">"ledBarStatus"</span><span class="sy4">:</span> <span class="nu0">5</span>
      <span class="br0">}</span>,
      <span class="st0">"reported"</span><span class="sy4">:</span> <span class="br0">{</span>
        <span class="st0">"Touch"</span><span class="sy4">:</span> <span class="kw2">false</span>,
        <span class="st0">"ledBarStatus"</span><span class="sy4">:</span> <span class="nu0">0</span>
      <span class="br0">}</span>
    <span class="br0">}</span></pre></div></div>
<dl><dd> 5. Then click Update shadow, your LED Bar will change to Level 5.
</dd></dl>
<h2> Resource</h2>
<ul><li><a href="http://aws.amazon.com/cn/documentation/iot/">AWS IoT Services Getting Started Guide</a>
</li><li><a href="/LinkIt_ONE">LinkIt ONE Wiki</a>
</li><li><a href="https://labs.mediatek.com/site/global/developer_tools/mediatek_linkit/get-started/aws/get-started/index.gsp">Started with AWS IoT Services on the LinkIt™ ONE Development Platform</a>
</li><li><a href="https://aws.amazon.com/iot/">AWS IoT</a>
</li></ul>
<p><br/>
</p>
<h2> Help us to make it better </h2>
<p><iframe frameborder="0" height="500" src="https://www.surveymonkey.com/r/D3SBJGZ" width="500"></iframe>
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>