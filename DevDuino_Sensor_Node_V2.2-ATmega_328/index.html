<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>DevDuino Sensor Node V2.2 (ATmega 328)</title><meta charset="utf-8"/></head><body><div class"container"><a href="../index.html"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>DevDuino Sensor Node V2.2 (ATmega 328)</h1><div class="thumb tright"><div class="thumbinner" style="width:302px;"><img src="img/DD_SN_2.2_rev1_face.jpg" width="300"/> <div class="thumbcaption"></div></div></div>

<p>Sensor Node is compact, Arduino-compatible microcontroller and is designed for wireless sensor networks using transceiver nRF24L01+.
This sensor can operate for a long time in stand-alone mode, only two batteries.
Supports update through the air and has a hardware encryption.
Also on board there are fitted temperature sensor and user interface of I2C for expansion.
</p><p>Model: <a href="http://www.seeedstudio.com/depot/DevDuino-Sensor-Node-V22-ATmega-328-p-2594.html">103990103</a>
</p><p><img src="img/Sn2.2top.jpg" width="440"/>
<img src="img/Sn2.2.jpg" width="440"/>
</p>
<h2>  Feature </h2>
<ul><li> Built on Arduino-compatible architecture (DualOptiboot)
</li><li> On board 64kb SPI flash / E2prom (for OTA firmware updates)
</li><li> On board ATSHA204A (for data encryption)
</li><li> Clock frequency - 16MHz (may be reduced to low energy consumption by up to 1MHz)
</li><li> Integrated temperature sensor MCP9700 (-40 +125 ° C, accuracy of ± 2 ° C)
</li><li> Built-in clock button
</li><li> Built-in LED (user)
</li><li> FTDI header similar to Arduino Duemilanove
</li><li> Atmel programming ISCP header
</li><li> 3 GROVE-compatible connector: I2C, 2 - Analog, 2- Digital
</li><li> Power from 2 elements AAA (not included)
</li><li> Dimensions 32 x 68.5 mm
</li></ul>
<h2>  Layout and schematics </h2>
<p><img src="img/Sn2_2-top.png" width="400"/>
<img src="img/Sn2_2-bottom.png" width="400"/>
</p><p><img src="img/SchemeSN2.2.PNG" width="500"/>
</p>
<h2>  Basic functionality </h2>
<p>In the basic version (without additional sensors) module can be used as a wireless temperature sensor (using built-in sensor MCP9700, connected to A3) to control the battery charge level (via built-in function microcontroller).
</p>
<h2>  Interfaces </h2>
<ul><li> A0, A1 - displayed on the connector "Analog" (the other two pin connector - VCC and GND for sensor supply)
</li><li> D3, D4 - displayed on the connector "Digital" (the other two pin connector - VCC and GND for sensor supply)
</li><li> A4 (SDA), A5 (SCL) - displayed on the connector "I2C" (the other two pin connector - VCC and GND for sensor supply)
</li><li> Interface for RF-module nRF24L01 +:
<ul><li> D11 - RF_MOSI
</li><li> D12 - RF_MISO
</li><li> D13 - RF_SCK
</li><li> D7 - RF_CE
</li><li> D6 - RF_CSN
</li><li> D2 - RF_IRQ
</li></ul>
</li><li> D4 - BUTTON
</li><li> D9 - LED
</li><li> A2 - ATSHA204A
</li><li> A3 - MCP9700 Temperature sensor
</li><li> Interface for EEPROM AT25DF512C:
<ul><li> D11 - MOSI
</li><li> D12 - MISO
</li><li> D13 - SCK
</li><li> D8 - EEPROM_CS
</li></ul>
</li></ul>
<h2>  Features Sensor Node </h2>
<h2>  Libraries </h2>
<h3>  Necessary libraries </h3>
<p>To use the Sensor Node requires the following libraries:
</p>
<ul><li> You must use the library from - <a href="https://github.com/mysensors/Arduino/tree/master">www.mysensors.org</a>
</li></ul>
<p>Software debugging and use
</p>
<ul><li> For Windows (GUI) - <a href="http://www.mysensors.org/controller/myscontroller">MYSController</a>
</li><li> For other OS - <a href="http://www.mycontroller.org/#/home">MyController.org</a>
</li></ul>
<p>API 
</p>
<ul><li> MySensors Arduino Library <a href="http://www.mysensors.org/download/sensor_api_15">(v1.5)</a>
</li></ul>
<h3>  Demo code (OTA Boot with testing all sensors)</h3>
<p>This code shows how to make the unit operate in standby getting firmware over the air (OTA), as well as to test all the sensors on board.
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"> 
<span class="coMULTI">/*
This sketch is for a devDuino SN v2.2 with the support OTA http://www.seeedstudio.com/wiki/DevDuino_Sensor_Node_V2.2_(ATmega_328)
and MySensors 1.5
 
For testing all the equipment, press the button D4 when a voltage is applied.
 
This sketch is a modification of code written
Version 1.3 - Thomas Bowman Mørch
for sensor Sensebender Micro
http://www.mysensors.org/hardware/micro
 
 modified
 18 December 2015
 by greengo
 */</span>
 
<span class="co2">#include &lt;MySensor.h&gt;</span>
<span class="co2">#include &lt;SPI.h&gt;</span>
<span class="co2">#include "utility/SPIFlash.h"</span>
<span class="co2">#include &lt;EEPROM.h&gt;  </span>
<span class="co2">#include &lt;sha204_lib_return_codes.h&gt;</span>
<span class="co2">#include &lt;sha204_library.h&gt;</span>
 
<span class="co1">// Define a static node address, remove if you want auto address assignment</span>
<span class="co1">//#define NODE_ADDRESS   2</span>
 
<span class="co2">#define RELEASE "0.01"</span>
 
<span class="co2">#define TEST_PIN          4 // Button D4</span>
<span class="co2">#define TEMP_SENSE_PIN   A3 // Input pin for the Temp sensor MCP9700</span>
<span class="co2">#define LED_PIN           9  // LED </span>
<span class="co2">#define ATSHA204_PIN     A2 // ATSHA204A </span>
 
<span class="kw4">const</span> <span class="kw4">int</span> sha204Pin <span class="sy1">=</span> ATSHA204_PIN<span class="sy4">;</span>
atsha204Class sha204<span class="br0">(</span>sha204Pin<span class="br0">)</span><span class="sy4">;</span>
 
SPIFlash flash<span class="br0">(</span><span class="nu0">8</span>, <span class="nu12">0x1F65</span><span class="br0">)</span><span class="sy4">;</span>
 
MyTransportNRF24 transport<span class="br0">(</span><span class="nu0">7</span>, <span class="nu0">6</span><span class="br0">)</span><span class="sy4">;</span>
MySensor gw<span class="br0">(</span>transport<span class="br0">)</span><span class="sy4">;</span> 
 
<span class="co1">// the setup function runs once when you press reset or power the board</span>
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  <span class="co1">// initialize digital pin 9 as an output.</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>LED_PIN, <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy4">;</span> 
 
  <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">115200</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"devDuino SNv2.2"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>RELEASE<span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> 
 
 <span class="co1">// First check if we should boot into test mode</span>
 
  <span class="kw3">pinMode</span><span class="br0">(</span>TEST_PIN,<span class="kw2">INPUT</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>TEST_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Enable pullup</span>
  <span class="kw1">if</span> <span class="br0">(</span><span class="sy3">!</span><span class="kw3">digitalRead</span><span class="br0">(</span>TEST_PIN<span class="br0">)</span><span class="br0">)</span> testMode<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="co1">// Make sure that ATSHA204 is not floating</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>ATSHA204_PIN, <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>ATSHA204_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span> 
 
<span class="co2">#ifdef NODE_ADDRESS</span>
  gw.<span class="kw3">begin</span><span class="br0">(</span><span class="kw2">NULL</span>, NODE_ADDRESS, <span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#else</span>
  gw.<span class="kw3">begin</span><span class="br0">(</span><span class="kw2">NULL</span>,AUTO,<span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif  </span>
 
  <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">LOW</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">" - Online!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
 
  gw.<span class="me1">sendSketchInfo</span><span class="br0">(</span><span class="st0">"devDuino SNv2.2"</span>, RELEASE<span class="br0">)</span><span class="sy4">;</span>   
 
<span class="br0">}</span>
 
<span class="co1">// the loop function runs over and over again forever</span>
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  gw.<span class="me1">process</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
<span class="br0">}</span>
 
<span class="coMULTI">/****************************************************
 *
 * Verify all peripherals, and signal via the LED if any problems.
 *
 ****************************************************/</span>
<span class="kw4">void</span> testMode<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
  uint8_t rx_buffer<span class="br0">[</span>SHA204_RSP_SIZE_MAX<span class="br0">]</span><span class="sy4">;</span>
  uint8_t ret_code<span class="sy4">;</span>
  byte tests <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
 
  <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Turn on LED.</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">" - TestMode"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Testing peripherals!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"-&gt; MCP9700 : "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> 
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw1">if</span> <span class="br0">(</span><span class="kw3">analogRead</span> <span class="br0">(</span>TEMP_SENSE_PIN<span class="br0">)</span>,<span class="kw2">HIGH</span> <span class="br0">)</span> 
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"ok!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    tests <span class="sy2">++</span><span class="sy4">;</span>
  <span class="br0">}</span>
  <span class="kw1">else</span>
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"failed!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"-&gt; Flash : "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span>flash.<span class="me1">initialize</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"ok!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    tests <span class="sy2">++</span><span class="sy4">;</span>
  <span class="br0">}</span>
  <span class="kw1">else</span>
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"failed!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
 
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"-&gt; SHA204 : "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  ret_code <span class="sy1">=</span> sha204.<span class="me1">sha204c_wakeup</span><span class="br0">(</span>rx_buffer<span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span>ret_code <span class="sy3">!</span><span class="sy1">=</span> SHA204_SUCCESS<span class="br0">)</span>
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Failed to wake device. Response: "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>ret_code, <span class="kw2">HEX</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span>ret_code <span class="sy1">==</span> SHA204_SUCCESS<span class="br0">)</span>
  <span class="br0">{</span>
    ret_code <span class="sy1">=</span> sha204.<span class="me1">getSerialNumber</span><span class="br0">(</span>rx_buffer<span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">if</span> <span class="br0">(</span>ret_code <span class="sy3">!</span><span class="sy1">=</span> SHA204_SUCCESS<span class="br0">)</span>
    <span class="br0">{</span>
      <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Failed to obtain device serial number. Response: "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>ret_code, <span class="kw2">HEX</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">else</span>
    <span class="br0">{</span>
      <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Ok (serial : "</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
      <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span><span class="nu0">9</span><span class="sy4">;</span> i<span class="sy2">++</span><span class="br0">)</span>
      <span class="br0">{</span>
        <span class="kw1">if</span> <span class="br0">(</span>rx_buffer<span class="br0">[</span>i<span class="br0">]</span> <span class="sy1">&lt;</span> <span class="nu12">0x10</span><span class="br0">)</span>
        <span class="br0">{</span>
          <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">'0'</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Because Serial.print does not 0-pad HEX</span>
        <span class="br0">}</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>rx_buffer<span class="br0">[</span>i<span class="br0">]</span>, <span class="kw2">HEX</span><span class="br0">)</span><span class="sy4">;</span>
      <span class="br0">}</span>
      <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">")"</span><span class="br0">)</span><span class="sy4">;</span>
      tests <span class="sy2">++</span><span class="sy4">;</span>
    <span class="br0">}</span>
 
  <span class="br0">}</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Test finished"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>tests <span class="sy1">==</span> <span class="nu0">3</span><span class="br0">)</span> 
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"Selftest ok!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span> <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="co1">// Blink OK pattern!</span>
    <span class="br0">{</span>
      <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span>
      <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">200</span><span class="br0">)</span><span class="sy4">;</span>
      <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">LOW</span><span class="br0">)</span><span class="sy4">;</span>
      <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">200</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw1">else</span> 
  <span class="br0">{</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"----&gt; Selftest failed!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">while</span> <span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span> <span class="co1">// Blink FAILED pattern! Rappidly blinking..</span>
    <span class="br0">{</span>
    <span class="br0">}</span>
  <span class="br0">}</span>  
<span class="br0">}</span></pre></div></div>
<h3>  Demo code (Working)</h3>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"> 
<span class="coMULTI">/*
This sketch is for a devDuino SN v2.2 with the support OTA http://www.seeedstudio.com/wiki/DevDuino_Sensor_Node_V2.2_(ATmega_328)
and MySensors 1.5
 
Press the button D4 when a voltage is applied.
If you want to download the new firmware over the air.
 
This sketch is a modification of code written
Version 1.3 - Thomas Bowman Mørch
for sensor Sensebender Micro
http://www.mysensors.org/hardware/micro
 
 modified
 30 December 2015
 by greengo
 */</span>
 
<span class="co2">#include &lt;MySensor.h&gt;</span>
<span class="co2">#include &lt;SPI.h&gt;</span>
<span class="co2">#include "utility/SPIFlash.h"</span>
<span class="co2">#include &lt;EEPROM.h&gt;  </span>
<span class="co2">#include &lt;sha204_lib_return_codes.h&gt;</span>
<span class="co2">#include &lt;sha204_library.h&gt;</span>
 
<span class="co1">// Define a static node address, remove if you want auto address assignment</span>
<span class="co1">//#define NODE_ADDRESS   2</span>
 
<span class="co1">// Uncomment the line below, to transmit battery voltage as a normal sensor value</span>
<span class="co2">#define BATT_SENSOR    2</span>
 
<span class="co2">#define RELEASE "1.1"</span>
 
<span class="co2">#define CHILD_ID_TEMP  1</span>
 
<span class="co1">// How many milli seconds between each measurement</span>
<span class="co2">#define MEASURE_INTERVAL 50000 //for Debug 50 sec</span>
<span class="co1">//#define MEASURE_INTERVAL  10000 //for Debug 10 sec</span>
 
<span class="co1">// How many milli seconds should we wait for OTA?</span>
<span class="co2">#define OTA_WAIT_PERIOD 300</span>
 
<span class="co1">// FORCE_TRANSMIT_INTERVAL, this number of times of wakeup, the sensor is forced to report all values to the controller</span>
<span class="co2">#define FORCE_TRANSMIT_INTERVAL 30 </span>
<span class="co1">//#define FORCE_TRANSMIT_INTERVAL 10 //for Debug </span>
 
<span class="co1">//LED Blink wait for OTA? LED blinks during data transmission. Greater battery energy consumption!</span>
<span class="co2">#define LED_BLINK_WAIT_TRANSMIT  </span>
 
<span class="co2">#define TEMP_TRANSMIT_THRESHOLD 0.5</span>
 
<span class="co2">#define OTA_ENABLE        4 // Button D4</span>
<span class="co2">#define LED_PIN           9 // LED </span>
<span class="co2">#define ATSHA204_PIN     A2 // ATSHA204A </span>
 
<span class="kw4">int</span> TEMP_SENSE_PIN <span class="sy1">=</span> A3<span class="sy4">;</span>  <span class="co1">// Input pin for the Temp sensor MCP9700</span>
<span class="kw4">float</span> TEMP_SENSE_OFFSET <span class="sy1">=</span> <span class="sy2">-</span><span class="nu16">0.01</span><span class="sy4">;</span>
 
<span class="kw4">const</span> <span class="kw4">int</span> sha204Pin <span class="sy1">=</span> ATSHA204_PIN<span class="sy4">;</span>
atsha204Class sha204<span class="br0">(</span>sha204Pin<span class="br0">)</span><span class="sy4">;</span>
 
SPIFlash flash<span class="br0">(</span><span class="nu0">8</span>, <span class="nu12">0x1F65</span><span class="br0">)</span><span class="sy4">;</span>
 
MyTransportNRF24 transport<span class="br0">(</span><span class="nu0">7</span>, <span class="nu0">6</span><span class="br0">)</span><span class="sy4">;</span>
MySensor gw<span class="br0">(</span>transport<span class="br0">)</span><span class="sy4">;</span> 
 
<span class="kw4">float</span> temp <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
 
MyMessage msgTemp<span class="br0">(</span>CHILD_ID_TEMP, V_TEMP<span class="br0">)</span><span class="sy4">;</span>
 
<span class="co2">#ifdef BATT_SENSOR</span>
MyMessage msgBatt<span class="br0">(</span>BATT_SENSOR, V_VOLTAGE<span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif</span>
 
<span class="co1">// Global settings</span>
<span class="kw4">int</span> measureCount <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="kw4">boolean</span> ota_enabled <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span> 
<span class="kw4">int</span> sendBattery <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="kw4">boolean</span> highfreq <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
<span class="kw4">boolean</span> transmission_occured <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
 
<span class="co1">// Storage of old measurements</span>
<span class="kw4">float</span> lastTemperature <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">100</span><span class="sy4">;</span>
<span class="kw4">long</span> lastBattery <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">100</span><span class="sy4">;</span>
 
<span class="co1">// the setup function runs once when you press reset or power the board</span>
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
  <span class="co1">// initialize digital pin 9 as an output.</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>LED_PIN, <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy4">;</span> 
 
  <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">115200</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"devDuino SNv2.2"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>RELEASE<span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> 
 
  <span class="kw3">pinMode</span><span class="br0">(</span>OTA_ENABLE, <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>OTA_ENABLE, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span><span class="sy3">!</span><span class="kw3">digitalRead</span><span class="br0">(</span>OTA_ENABLE<span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
    ota_enabled <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
  <span class="br0">}</span> 
 
  <span class="co1">// Make sure that ATSHA204 is not floating</span>
  <span class="kw3">pinMode</span><span class="br0">(</span>ATSHA204_PIN, <span class="kw2">INPUT</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>ATSHA204_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw3">digitalWrite</span><span class="br0">(</span>OTA_ENABLE, <span class="kw2">LOW</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// remove pullup, save some power. </span>
  <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span> 
 
<span class="co2">#ifdef NODE_ADDRESS</span>
  gw.<span class="kw3">begin</span><span class="br0">(</span><span class="kw2">NULL</span>, NODE_ADDRESS, <span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#else</span>
  gw.<span class="kw3">begin</span><span class="br0">(</span><span class="kw2">NULL</span>,AUTO,<span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif  </span>
 
  <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">LOW</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw2">Serial</span>.<span class="kw3">flush</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">" - Online!"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
  gw.<span class="me1">sendSketchInfo</span><span class="br0">(</span><span class="st0">"devDuino SNv2.2"</span>, RELEASE<span class="br0">)</span><span class="sy4">;</span> 
 
  gw.<span class="me1">present</span><span class="br0">(</span>CHILD_ID_TEMP,S_TEMP<span class="br0">)</span><span class="sy4">;</span> 
 
<span class="co2">#ifdef BATT_SENSOR</span>
  gw.<span class="me1">present</span><span class="br0">(</span>BATT_SENSOR, S_POWER<span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif </span>
 
sendTempMeasurements<span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
sendBattLevel<span class="br0">(</span><span class="kw2">false</span><span class="br0">)</span><span class="sy4">;</span>
 
 <span class="kw1">if</span> <span class="br0">(</span>ota_enabled<span class="br0">)</span> <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"OTA FW update enabled"</span><span class="br0">)</span><span class="sy4">;</span>
 
<span class="br0">}</span>
 
<span class="co1">// the loop function runs over and over again forever</span>
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  measureCount <span class="sy2">++</span><span class="sy4">;</span>
  sendBattery <span class="sy2">++</span><span class="sy4">;</span>
  <span class="kw4">bool</span> forceTransmit <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
  transmission_occured <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span><span class="br0">(</span>measureCount <span class="sy1">==</span> <span class="nu0">5</span><span class="br0">)</span> <span class="sy3">&amp;&amp;</span> highfreq<span class="br0">)</span> 
  <span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="sy3">!</span>ota_enabled<span class="br0">)</span> clock_prescale_set<span class="br0">(</span>clock_div_8<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Switch to 1Mhz for the reminder of the sketch, save power.</span>
    highfreq <span class="sy1">=</span> <span class="kw2">false</span><span class="sy4">;</span>
  <span class="br0">}</span> 
 
  <span class="kw1">if</span> <span class="br0">(</span>measureCount <span class="sy1">&gt;</span> FORCE_TRANSMIT_INTERVAL<span class="br0">)</span> <span class="br0">{</span> <span class="co1">// force a transmission</span>
    forceTransmit <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span> 
    measureCount <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
  <span class="br0">}</span>
 
  gw.<span class="me1">process</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
  sendTempMeasurements<span class="br0">(</span>forceTransmit<span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span>sendBattery <span class="sy1">&gt;</span> <span class="nu0">60</span><span class="br0">)</span> 
  <span class="br0">{</span>
     sendBattLevel<span class="br0">(</span>forceTransmit<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Not needed to send battery info that often</span>
     sendBattery <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
  <span class="br0">}</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>ota_enabled <span class="sy3">&amp;</span> transmission_occured<span class="br0">)</span> <span class="br0">{</span>
      gw.<span class="me1">wait</span><span class="br0">(</span>OTA_WAIT_PERIOD<span class="br0">)</span><span class="sy4">;</span>
  <span class="br0">}</span>
 
  gw.<span class="me1">sleep</span><span class="br0">(</span>MEASURE_INTERVAL<span class="br0">)</span><span class="sy4">;</span>  
<span class="br0">}</span>
<span class="coMULTI">/********************************************
 *
 * Sends battery information (battery percentage)
 *
 * Parameters
 * - force : Forces transmission of a value
 *
 *******************************************/</span>
<span class="kw4">void</span> sendBattLevel<span class="br0">(</span><span class="kw4">bool</span> force<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw1">if</span> <span class="br0">(</span>force<span class="br0">)</span> lastBattery <span class="sy1">=</span> <span class="sy2">-</span><span class="nu0">1</span><span class="sy4">;</span>
  <span class="kw4">long</span> vcc <span class="sy1">=</span> readVcc<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">if</span> <span class="br0">(</span>vcc <span class="sy3">!</span><span class="sy1">=</span> lastBattery<span class="br0">)</span> <span class="br0">{</span>
    lastBattery <span class="sy1">=</span> vcc<span class="sy4">;</span>
 
<span class="co2">#ifdef BATT_SENSOR</span>
    gw.<span class="kw3">send</span><span class="br0">(</span>msgBatt.<span class="me1">set</span><span class="br0">(</span>vcc<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif</span>
 
    <span class="co1">// Calculate percentage</span>
 
    vcc <span class="sy1">=</span> vcc <span class="sy2">-</span> <span class="nu0">1900</span><span class="sy4">;</span> <span class="co1">// subtract 1.9V from vcc, as this is the lowest voltage we will operate at</span>
 
    <span class="kw4">long</span> percent <span class="sy1">=</span> vcc <span class="sy2">/</span> <span class="nu16">14.0</span><span class="sy4">;</span>
    gw.<span class="me1">sendBatteryLevel</span><span class="br0">(</span>percent<span class="br0">)</span><span class="sy4">;</span>
    transmission_occured <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>
<span class="coMULTI">/*********************************************
 *
 * Sends temperature and humidity from Si7021 sensor
 *
 * Parameters
 * - force : Forces transmission of a value (even if it's the same as previous measurement)
 *
 *********************************************/</span>
<span class="kw4">void</span> sendTempMeasurements<span class="br0">(</span><span class="kw4">bool</span> force<span class="br0">)</span>
<span class="br0">{</span>
  <span class="kw4">bool</span> tx <span class="sy1">=</span> force<span class="sy4">;</span>
 
 <span class="kw4">float</span> temp <span class="sy1">=</span> readMCP9700<span class="br0">(</span>TEMP_SENSE_PIN,TEMP_SENSE_OFFSET<span class="br0">)</span><span class="sy4">;</span> <span class="co1">//temp pin and offset for calibration</span>
 
  <span class="kw4">float</span> diffTemp <span class="sy1">=</span> <span class="kw3">abs</span><span class="br0">(</span>lastTemperature <span class="sy2">-</span> temp<span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span>F<span class="br0">(</span><span class="st0">"TempDiff :"</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span><span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>diffTemp<span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>diffTemp <span class="sy1">&gt;</span> TEMP_TRANSMIT_THRESHOLD<span class="br0">)</span> tx <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
 
  <span class="kw1">if</span> <span class="br0">(</span>tx<span class="br0">)</span> <span class="br0">{</span>
    measureCount <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
 
    <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"T: "</span><span class="br0">)</span><span class="sy4">;</span><span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>temp<span class="br0">)</span><span class="sy4">;</span>
 <span class="co1">// LED </span>
<span class="co2">#ifdef LED_BLINK_WAIT_TRANSMIT</span>
   <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">HIGH</span><span class="br0">)</span><span class="sy4">;</span>  
     gw.<span class="kw3">send</span><span class="br0">(</span>msgTemp.<span class="me1">set</span><span class="br0">(</span>temp,<span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
   <span class="kw3">digitalWrite</span><span class="br0">(</span>LED_PIN, <span class="kw2">LOW</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#else</span>
     gw.<span class="kw3">send</span><span class="br0">(</span>msgTemp.<span class="me1">set</span><span class="br0">(</span>temp,<span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>
<span class="co2">#endif</span>
    lastTemperature <span class="sy1">=</span> temp<span class="sy4">;</span>
    transmission_occured <span class="sy1">=</span> <span class="kw2">true</span><span class="sy4">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>
<span class="coMULTI">/*******************************************
 *
 * Internal TEMP sensor 
 *
 *******************************************/</span>
<span class="kw4">float</span> readMCP9700<span class="br0">(</span><span class="kw4">int</span> pin,<span class="kw4">float</span> offset<span class="br0">)</span>
 
<span class="br0">{</span>
  <span class="kw3">analogReference</span><span class="br0">(</span><span class="kw2">INTERNAL</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw3">analogRead</span><span class="br0">(</span>A0<span class="br0">)</span><span class="sy4">;</span> <span class="co1">//perform a dummy read to clear the adc</span>
  <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">20</span><span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> n<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span>n<span class="sy1">&lt;</span><span class="nu0">5</span><span class="sy4">;</span>n<span class="sy2">++</span><span class="br0">)</span>
    <span class="kw3">analogRead</span><span class="br0">(</span>pin<span class="br0">)</span><span class="sy4">;</span>
 
  <span class="kw4">int</span> adc<span class="sy1">=</span><span class="kw3">analogRead</span><span class="br0">(</span>pin<span class="br0">)</span><span class="sy4">;</span>
  <span class="kw4">float</span> tSensor<span class="sy1">=</span><span class="br0">(</span><span class="br0">(</span>adc<span class="sy2">*</span><span class="br0">(</span><span class="nu16">1.1</span><span class="sy2">/</span><span class="nu16">1024.0</span><span class="br0">)</span><span class="br0">)</span><span class="sy2">-</span><span class="nu16">0.5</span><span class="sy2">+</span>offset<span class="br0">)</span><span class="sy2">*</span><span class="nu0">100</span><span class="sy4">;</span>
  <span class="kw4">float</span> error<span class="sy1">=</span><span class="nu19">244e-6</span><span class="sy2">*</span><span class="br0">(</span><span class="nu0">125</span><span class="sy2">-</span>tSensor<span class="br0">)</span><span class="sy2">*</span><span class="br0">(</span>tSensor <span class="sy2">-</span> <span class="sy2">-</span><span class="nu16">40.0</span><span class="br0">)</span> <span class="sy2">+</span> <span class="nu19">2E-12</span><span class="sy2">*</span><span class="br0">(</span>tSensor <span class="sy2">-</span> <span class="sy2">-</span><span class="nu16">40.0</span><span class="br0">)</span><span class="sy2">-</span><span class="nu16">2.0</span><span class="sy4">;</span>
  <span class="kw4">float</span> temp<span class="sy1">=</span>tSensor<span class="sy2">-</span>error<span class="sy4">;</span>
 
  <span class="kw1">return</span> temp<span class="sy4">;</span>
<span class="br0">}</span>
<span class="coMULTI">/*******************************************
 *
 * Internal battery ADC measuring 
 *
 *******************************************/</span>
<span class="kw4">long</span> readVcc<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  <span class="co1">// Read 1.1V reference against AVcc</span>
  <span class="co1">// set the reference to Vcc and the measurement to the internal 1.1V reference</span>
  <span class="co2">#if defined(__AVR_ATmega32U4__) || defined(__AVR_ATmega1280__) || defined(__AVR_ATmega2560__)</span>
    ADMUX <span class="sy1">=</span> _BV<span class="br0">(</span>REFS0<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX4<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX3<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX2<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX1<span class="br0">)</span><span class="sy4">;</span>
  <span class="co2">#elif defined (__AVR_ATtiny24__) || defined(__AVR_ATtiny44__) || defined(__AVR_ATtiny84__)</span>
    ADMUX <span class="sy1">=</span> _BV<span class="br0">(</span>MUX5<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX0<span class="br0">)</span><span class="sy4">;</span>
  <span class="co2">#elif defined (__AVR_ATtiny25__) || defined(__AVR_ATtiny45__) || defined(__AVR_ATtiny85__)</span>
    ADcdMUX <span class="sy1">=</span> _BV<span class="br0">(</span>MUX3<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX2<span class="br0">)</span><span class="sy4">;</span>
  <span class="co2">#else</span>
    ADMUX <span class="sy1">=</span> _BV<span class="br0">(</span>REFS0<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX3<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX2<span class="br0">)</span> <span class="sy3">|</span> _BV<span class="br0">(</span>MUX1<span class="br0">)</span><span class="sy4">;</span>
  <span class="co2">#endif  </span>
 
  <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Wait for Vref to settle</span>
  ADCSRA <span class="sy3">|</span><span class="sy1">=</span> _BV<span class="br0">(</span>ADSC<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// Start conversion</span>
  <span class="kw1">while</span> <span class="br0">(</span>bit_is_set<span class="br0">(</span>ADCSRA,ADSC<span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// measuring</span>
 
  uint8_t low  <span class="sy1">=</span> ADCL<span class="sy4">;</span> <span class="co1">// must read ADCL first - it then locks ADCH  </span>
  uint8_t high <span class="sy1">=</span> ADCH<span class="sy4">;</span> <span class="co1">// unlocks both</span>
 
  <span class="kw4">long</span> result <span class="sy1">=</span> <span class="br0">(</span>high<span class="sy1">&lt;&lt;</span><span class="nu0">8</span><span class="br0">)</span> <span class="sy3">|</span> low<span class="sy4">;</span>
 
  result <span class="sy1">=</span> <span class="nu0">1125300L</span> <span class="sy2">/</span> result<span class="sy4">;</span> <span class="co1">// Calculate Vcc (in mV); 1125300 = 1.1*1023*1000</span>
  <span class="kw1">return</span> result<span class="sy4">;</span> <span class="co1">// Vcc in millivolts</span>
 
<span class="br0">}</span></pre></div></div>
<h2> Version Tracker</h2>
<table border="1" cellpadding="5" cellspacing="0">
<tr>
<td width="150"> <b>Revision</b>
</td>
<td width="450"> <b>Description</b>
</td>
<td width="80"> <b>Release</b>
</td></tr>
<tr style="font-size: 90%">
<td> 2.2 rev 1
</td>
<td> Public version
</td>
<td> 18.10.2015
</td></tr></table>
<h2>  Questions and Answers </h2>
<ul><li>Blog <a href="//devicter.blogspot.ru/2013/12/shield-matrix-sensor-node.html">Sensor Node</a>
</li><li>Ask a question by e-mail support@devicter.ru
</li></ul>
<h2>  How to buy  </h2>
<p>This product can be purchased:<br/>
China (shipping worldwide) <br/>
<a href="http://www.seeedstudio.com/depot/DevDuino-Sensor-Node-V22-ATmega-328-p-2594.html">Seeed store</a> <br/>
<a href="http://www.elecrow.com/devduino-sensor-node-v22-atmega-328-%E2%80%93-with-support-ota-update-p-1485.html">Elecrow store</a> <br/>
Russia <br/>
<a href="http://devicter.ru/goods/Sensor-Node-V2-2">Devicter store</a>
</p>
<h2>  Licensing  </h2>
<p>This documentation is licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by-sa/3.0/">Attribution-ShareAlike License 3.0</a> Source code and libraries are 
</p><p>licensed under <a href="http://www.gnu.org/licenses/gpl.html">GPL/LGPL</a>, see source code files for details.
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>