<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>RePhone APIs - Audio</title><meta charset="utf-8"/><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84386732-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>RePhone APIs - Audio</h1><div class="thumb tright"><div class="thumbinner" style="width:502px;"><img src="img/Xadow_Audio.JPG" width="500"/> <div class="thumbcaption"></div></div></div>
<p>RePhone supports playback audio files on SD card or on built-in flash. Formats supported include <b>WAV</b>, <b>MP3</b>, <b>AAC</b>, etc.
With this library, you can <b>Play</b>, <b>Pause</b>, <b>Stop</b> playback process and <b>Adjust volume</b>.
</p><p>The playback (decoding) job is handled internally by <b>LinkIt</b>. Therefore, all functions are <b>non-blocking</b>, which means after you call playFile(), it will play the audio and immediately return to your program.
</p><p>Use getStatus() to check the current status and act correspondingly. The audio status can be "playing", "play finished", "play pauseed", etc.
The audio will be outputted through the earphone jack on the Linkit board.
</p><p><b>Note that</b> if you try to play another audio file before the previous playback is finished, the previous playback will be stopped automatically, and the new audio will be played.
</p><p><br/>
<a href="/RePhone_APIs"><img src="img/Viewallapiofrephone.png" width="350"/></a>
</p><p><br/>
</p>
<p><br/>
</p>
<h2> Function List</h2>
<ul><li> begin()
</li><li> playFile()
</li><li> setVolume()
</li><li> pause()
</li><li> resume()
</li><li> stop()
</li><li> getStatus()
</li></ul>
<p><br/>
</p>

<h3> LAudio.begin()</h3>
<p>Initializes the Audio module.
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.begin()
</p>
<ul><li> <i><b>Parameters</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Example</b></i>
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.playFile()</h3>
<p>Plays an audio file on SD card or flash storage.
</p>
<ul><li> Syntax
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1">LAudio.<span class="me1">playFile</span><span class="br0">(</span>StorageEnum drv, <span class="kw4">char</span> <span class="sy2">*</span>songName<span class="br0">)</span>
LAudio.<span class="me1">playFile</span><span class="br0">(</span>StorageEnum drv, <span class="kw2">wchar_t</span><span class="sy2">*</span> songName<span class="br0">)</span></pre></div></div>
<ul><li> <i><b>Parameters</b></i>
<ul><li> <i>drv</i> - Storage, can be storageSD (SD card) or storageFlash (flash storage)
</li><li> <i>songName</i> - Path of audio file in ascii (char*) or unicode (wchar_t*) encoding
</li></ul>
</li></ul>
<ul><li><i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li>Example
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.setVolume()</h3>
<p>Adjusts the playback volume; range is from 0 (silent) to 6 (max).
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.setVolume(unsigned char volume)
</p>
<ul><li> <i><b>Parameters</b></i>
<ul><li> <i>volume</i>:	Volume level, can be <b>0</b> to <b>6</b>; 0 as silent and 6 as max volume
</li></ul>
</li></ul>
<ul><li> <i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Example</b></i>
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.pause()</h3>
<p>Pauses the playback.
It only works when there is an active playback ongoing (by playFile()).
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.pause()
</p>
<ul><li> <i><b>Parameters</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Example</b></i>
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">pause</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>    <span class="co1">// play for 5secs and pause</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">resume</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>    <span class="co1">// wait for another 5 secs to resume</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="kw3">stop</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>    <span class="co1">// wait for another 5 secs to stop</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.resume()</h3>
<p>Resumes playback.
It only works when the playback has been paused.
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.resume()
</p>
<ul><li> <i><b>Parameters</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Example</b></i>
</li></ul>
<ol><li>include &lt;LAudio.h&gt;
</li></ol>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">pause</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// play for 5secs and pause</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">resume</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// wait for another 5 secs to resume</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="kw3">stop</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>   <span class="co1">// wait for another 5 secs to stop</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.stop()</h3>
<p>Stops playback.
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.stop()
</p>
<ul><li> <i><b>Parameters</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Returns</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Example</b></i>
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">pause</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// play for 5secs and pause</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">resume</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// wait for another 5 secs to resume</span>
 
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">5000</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="kw3">stop</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>   <span class="co1">// wait for another 5 secs to stop</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
 
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> LAudio.getStatus()</h3>
<p>Queries the current playback status.
</p>
<ul><li> <i><b>Syntax</b></i>
</li></ul>
<p>LAudio.getStatus()
</p>
<ul><li> <i><b>Parameters</b></i>
</li></ul>
<p>N/A
</p>
<ul><li> <i><b>Returns</b></i>
<ul><li> <i>AudioStatus</i> - Playback status, can be:
</li><li> <i>AudioStop</i> - Playback is stopped.
</li><li> <i>AudioPause</i> - Playback is paused (and can resume).
</li><li> <i>AudioResume</i> - Playback resumes
</li><li> <i>AudioEndOfFile</i> - Playback is finished.
</li><li> <i>AudioCommonFailed</i> - Playback fails (e.g. the audio file is corrupted).
</li></ul>
</li></ul>
<ul><li> <i><b>Example</b></i>
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">setVolume</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>
    LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    AudioStatus <span class="kw3">status</span><span class="sy4">;</span>
    <span class="kw3">status</span> <span class="sy1">=</span> LAudio.<span class="me1">getStatus</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">if</span><span class="br0">(</span>AudioEndOfFile <span class="sy1">==</span> <span class="kw3">status</span><span class="br0">)</span>    <span class="co1">// Check if playback finish and restart</span>
    <span class="br0">{</span>
        LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"sample.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h2> Example</h2>
<ul><li> <i><b>Description</b></i>
</li></ul>
<p>With this example, you can play a mp3 file. 
Open serial monitor to input a number to control the playing. 
</p><p>Command as below:
</p>
<ol><li> Play
</li><li> Setvolume
</li><li> Pause
</li><li> Resume
</li><li> Stop
</li></ol>
<ul><li> <i><b>Code</b></i>
</li></ul>
<p>You can find the code here: <b>File</b> &gt; <b>Examples</b> &gt; <b>LAudio</b> &gt; <b>AudioPlayer</b>
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="coMULTI">/*
  RePhone audio test Demo
  First you need to put a mp3 file to storage
  Then open the Serial monitor, input number to change the status
  1 - Play
  2 - Setvolume
  3 - Pause
  4 - Resume
  5 - Stop
*/</span>
<span class="co2">#include &lt;LAudio.h&gt;</span>
 
<span class="co1">// add your music file name here</span>
<span class="co2">#define    FILE_NAME    "music.mp3"</span>
 
<span class="co2">#define    PLAY         1</span>
<span class="co2">#define    SETVOLUME    2</span>
<span class="co2">#define    PAUSE        3</span>
<span class="co2">#define    RESUME       4</span>
<span class="co2">#define    STOP         5</span>
 
<span class="kw4">unsigned</span> <span class="kw4">char</span> Status_Value <span class="sy1">=</span> STOP<span class="sy4">;</span>
 
<span class="kw4">int</span> volume <span class="sy1">=</span> <span class="nu0">6</span><span class="sy4">;</span>
 
<span class="kw4">void</span> changeVolume<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    volume<span class="sy2">++</span><span class="sy4">;</span>
    volume <span class="sy1">=</span> volume<span class="sy1">&gt;</span><span class="nu0">6</span> <span class="sy4">?</span> <span class="nu0">1</span> <span class="sy4">:</span> volume<span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    LAudio.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">115200</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Play      - 1"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Setvolume - 2"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Pause     - 3"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Resume    - 4"</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Stop      - 5"</span><span class="br0">)</span><span class="sy4">;</span>
    Change_Status<span class="br0">(</span>PLAY<span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
 
<span class="kw4">char</span> StatusFlag <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw4">unsigned</span> <span class="kw4">char</span> KEY_NUM<span class="sy4">;</span>
    AudioStatus <span class="kw3">status</span><span class="sy4">;</span>
 
    KEY_NUM <span class="sy1">=</span> task_uart_key<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
 
    <span class="kw1">if</span><span class="br0">(</span>KEY_NUM <span class="sy1">&gt;</span> <span class="nu0">0</span><span class="br0">)</span>
    <span class="br0">{</span>
        Change_Status<span class="br0">(</span>KEY_NUM<span class="br0">)</span><span class="sy4">;</span>
        KEY_NUM <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
    <span class="br0">}</span>
 
    <span class="kw3">status</span> <span class="sy1">=</span> LAudio.<span class="me1">getStatus</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="kw1">if</span><span class="br0">(</span>StatusFlag <span class="sy3">!</span><span class="sy1">=</span> <span class="kw3">status</span><span class="br0">)</span>
    <span class="br0">{</span>
        StatusFlag <span class="sy1">=</span> <span class="kw3">status</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"LAudio status is "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="kw3">status</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
 
    <span class="kw1">if</span><span class="br0">(</span><span class="kw3">status</span> <span class="sy1">==</span> AudioEndOfFile<span class="br0">)</span>
    <span class="br0">{</span>
        Status_Value <span class="sy1">=</span> PLAY<span class="sy4">;</span>
        Change_Status<span class="br0">(</span>Status_Value<span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> Change_Status<span class="br0">(</span><span class="kw4">unsigned</span> <span class="kw4">char</span> <span class="kw3">status</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">switch</span><span class="br0">(</span><span class="kw3">status</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">case</span> <span class="nu0">1</span><span class="sy4">:</span>
        LAudio.<span class="me1">playFile</span><span class="br0">(</span>storageFlash,<span class="br0">(</span><span class="kw4">char</span><span class="sy2">*</span><span class="br0">)</span><span class="st0">"music.mp3"</span><span class="br0">)</span><span class="sy4">;</span>
        LAudio.<span class="me1">setVolume</span><span class="br0">(</span>volume<span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"playOne"</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">break</span><span class="sy4">;</span>
 
        <span class="kw1">case</span> <span class="nu0">2</span><span class="sy4">:</span>
        LAudio.<span class="me1">setVolume</span><span class="br0">(</span>volume<span class="br0">)</span><span class="sy4">;</span>
        changeVolume<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"set volume to "</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>volume<span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">break</span><span class="sy4">;</span>
 
        <span class="kw1">case</span> <span class="nu0">3</span><span class="sy4">:</span>
        LAudio.<span class="me1">pause</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"pause"</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">break</span><span class="sy4">;</span>
 
        <span class="kw1">case</span> <span class="nu0">4</span><span class="sy4">:</span>
        LAudio.<span class="me1">resume</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"resume"</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">break</span><span class="sy4">;</span>
 
        <span class="kw1">case</span> <span class="nu0">5</span><span class="sy4">:</span>
        LAudio.<span class="kw3">stop</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"stop"</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw1">break</span><span class="sy4">;</span>
 
        <span class="kw1">default</span><span class="sy4">:</span>
        <span class="kw1">break</span><span class="sy4">;</span>
    <span class="br0">}</span>
<span class="br0">}</span>
 
<span class="kw4">unsigned</span> <span class="kw4">int</span> task_uart_key<span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    String inString <span class="sy1">=</span> <span class="st0">""</span><span class="sy4">;</span>
    <span class="kw4">unsigned</span> <span class="kw4">int</span> keyValue <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
    <span class="kw4">unsigned</span> <span class="kw4">char</span> bitCount <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>
    <span class="kw4">unsigned</span> <span class="kw4">char</span> dataTemp1<span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span> <span class="sy1">=</span> <span class="br0">{</span><span class="nu0">0</span><span class="br0">}</span><span class="sy4">;</span>
    <span class="kw1">while</span><span class="br0">(</span><span class="kw2">Serial</span>.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span> <span class="sy1">&gt;</span> <span class="nu0">0</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw4">unsigned</span> <span class="kw4">char</span> inChar <span class="sy1">=</span> <span class="kw2">Serial</span>.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        inString <span class="sy2">+</span><span class="sy1">=</span> <span class="br0">(</span><span class="kw4">char</span><span class="br0">)</span>inChar<span class="sy4">;</span>
        dataTemp1<span class="br0">[</span>bitCount<span class="br0">]</span> <span class="sy1">=</span> inChar <span class="sy2">-</span> <span class="st0">'0'</span><span class="sy4">;</span>
        bitCount <span class="sy2">+</span><span class="sy1">=</span> <span class="nu0">1</span><span class="sy4">;</span>
        <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">10</span><span class="br0">)</span><span class="sy4">;</span>
    <span class="br0">}</span>
    <span class="kw1">if</span><span class="br0">(</span>inString <span class="sy3">!</span><span class="sy1">=</span> <span class="st0">""</span><span class="br0">)</span>
    <span class="br0">{</span>
        <span class="kw1">if</span><span class="br0">(</span>bitCount <span class="sy1">&gt;</span> <span class="nu0">4</span><span class="br0">)</span>
        <span class="br0">{</span>
            <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span><span class="st0">"Key input error."</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
        <span class="kw1">else</span>
        <span class="br0">{</span>
            <span class="kw1">for</span><span class="br0">(</span><span class="kw4">char</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span>i<span class="sy1">&lt;</span>bitCount<span class="sy4">;</span>i<span class="sy2">++</span><span class="br0">)</span>
            <span class="br0">{</span>
                <span class="kw4">unsigned</span> <span class="kw4">int</span> dataTemp2 <span class="sy1">=</span> <span class="nu0">1</span><span class="sy4">;</span>
                <span class="kw1">for</span><span class="br0">(</span><span class="kw4">char</span> j<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span>j<span class="sy1">&lt;</span><span class="br0">(</span>bitCount<span class="sy2">-</span>i<span class="sy2">-</span><span class="nu0">1</span><span class="br0">)</span><span class="sy4">;</span>j<span class="sy2">++</span><span class="br0">)</span>dataTemp2 <span class="sy2">*</span><span class="sy1">=</span> <span class="nu0">10</span><span class="sy4">;</span>
                keyValue <span class="sy2">+</span><span class="sy1">=</span> <span class="br0">(</span>dataTemp1<span class="br0">[</span>i<span class="br0">]</span> <span class="sy2">*</span> dataTemp2<span class="br0">)</span><span class="sy4">;</span>
            <span class="br0">}</span>
            <span class="kw2">Serial</span>.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"Key value is: "</span><span class="br0">)</span><span class="sy4">;</span>
            <span class="kw2">Serial</span>.<span class="kw3">println</span><span class="br0">(</span>keyValue<span class="br0">)</span><span class="sy4">;</span>
        <span class="br0">}</span>
    <span class="br0">}</span>
    <span class="kw1">return</span> keyValue<span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h2> Resources </h2>
<ul><li> <a href="/Rephone">Main wiki for RePhone</a>
</li><li> <a href="/Xadow_Audio">Xadow - Audio</a>
</li><li> <a href="/RePhone_APIs">RePhone APIs main page</a>
</li></ul>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>