<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - GPS</title><meta charset="utf-8"/><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84386732-1', 'auto');
  ga('send', 'pageview');
</script>
</head>
<body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - GPS</h1>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><img src="img/Grove-GPS.jpg" width="400"/> <div class="thumbcaption"></div></div></div>
<p>This Grove - GPS module is a cost-efficient and field-programmable gadget armed with a SIM28 (u-blox 6 is the old version) and serial communication configuration. It features 22 tracking / 66 acquisition channel GPS receiver. The sensitivity of tracking and acquisition both reach up to -160dBm, making it a great choice for personal navigation projects and location services, as well as an outstanding one among products of the same price class.
</p><p><br/>
<a href="http://www.seeedstudio.com/depot/grove-gps-p-959.html"><img src="../common/Get_One_Now_Banner.png" width="300"/></a>
</p><p><br/>
</p>
<p><br/>
<br/>
</p><p><br/>
</p>
<h2> Features </h2>
<ul><li>Supports NMEA and u-blox 6 protocols. ( Till Jan,10 2014, after that SIM28 instead)
</li><li>Low power consumption  
</li><li>Baud rates configurable
</li><li>Grove compatible interface 
</li></ul>
<p><br/>
</p>
<h2> Specification </h2>
<h3> Specification</h3>
<table>
<tr>
<th> Parameter
</th>
<th> Range/Value
</th></tr>
<tr>
<td width="200"> Input Voltage
</td>
<td width="200"> 3.3/5V
</td></tr>
<tr>
<td> BaudRate
</td>
<td> 4800 - 57600(u-blox version)
</td></tr>
<tr>
<td> BaudRate
</td>
<td> 9600 - 115200(SIM28 version)
</td></tr>
<tr>
<td> Default BaudRate
</td>
<td> 9600
</td></tr>
<br/>
</table>
<h3> Platforms Supported</h3>
<ul><li> Arduino
</li><li> Raspberry Pi
</li></ul>
<p><br/>
</p>
<h2> Getting Started </h2>
<p>Following documents help in getting the user started with Grove. 
</p>
<ul><li> <a href="/Grove_System">Introduction to Grove system</a>
</li></ul>
<p><br/>
</p>
<h2> Demos </h2>
<h3> With <a href="/w/index.php?title=Arduino&amp;action=edit&amp;redlink=1" title="Arduino (page does not exist)">Arduino</a></h3>
<p><i>This sample simply reads from the GPS using software serial and sends it back out on the serial port.</i>
</p><p>1. Connect the Grove-GPS to Digital I/O 2 on the <a href="/Grove-Base_Shield" title="Grove - Base Shield">Grove - Base Shield</a> using a Grove Universal 4 pin cable.
</p><p>2. Upload the code below. Please click <a href="/Upload_Code">here</a> if you do not know how to upload.<br/>
</p><p><br/>
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co1">// link between the computer and the SoftSerial Shield</span>
<span class="co1">//at 9600 bps 8-N-1</span>
<span class="co1">//Computer is connected to Hardware UART</span>
<span class="co1">//SoftSerial Shield is connected to the Software UART:D2&amp;D3</span>
 
<span class="co2">#include &lt;SoftwareSerial.h&gt;</span>
 
<span class="kw2">SoftwareSerial</span> SoftSerial<span class="br0">(</span><span class="nu0">2</span>, <span class="nu0">3</span><span class="br0">)</span><span class="sy4">;</span>
<span class="kw4">unsigned</span> <span class="kw4">char</span> buffer<span class="br0">[</span><span class="nu0">64</span><span class="br0">]</span><span class="sy4">;</span>                   <span class="co1">// buffer array for data receive over serial port</span>
<span class="kw4">int</span> count<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span>                                <span class="co1">// counter for buffer array</span>
 
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    SoftSerial.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>                 <span class="co1">// the SoftSerial baud rate</span>
    <span class="kw2">Serial</span>.<span class="kw3">begin</span><span class="br0">(</span><span class="nu0">9600</span><span class="br0">)</span><span class="sy4">;</span>                     <span class="co1">// the Serial port of Arduino baud rate.</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
    <span class="kw1">if</span> <span class="br0">(</span>SoftSerial.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>                     <span class="co1">// if date is coming from software serial port ==&gt; data is coming from SoftSerial shield</span>
    <span class="br0">{</span>
        <span class="kw1">while</span><span class="br0">(</span>SoftSerial.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>               <span class="co1">// reading data into char array</span>
        <span class="br0">{</span>
            buffer<span class="br0">[</span>count<span class="sy2">++</span><span class="br0">]</span><span class="sy1">=</span>SoftSerial.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>      <span class="co1">// writing data into array</span>
            <span class="kw1">if</span><span class="br0">(</span>count <span class="sy1">==</span> <span class="nu0">64</span><span class="br0">)</span><span class="kw1">break</span><span class="sy4">;</span>
        <span class="br0">}</span>
        <span class="kw2">Serial</span>.<span class="kw3">write</span><span class="br0">(</span>buffer,count<span class="br0">)</span><span class="sy4">;</span>                 <span class="co1">// if no data transmission ends, write buffer to hardware serial port</span>
        clearBufferArray<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>                         <span class="co1">// call clearBufferArray function to clear the stored data from the array</span>
        count <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>                                  <span class="co1">// set counter of while loop to zero</span>
 
 
    <span class="br0">}</span>
    <span class="kw1">if</span> <span class="br0">(</span><span class="kw2">Serial</span>.<span class="kw3">available</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span>                 <span class="co1">// if data is available on hardware serial port ==&gt; data is coming from PC or notebook</span>
    SoftSerial.<span class="kw3">write</span><span class="br0">(</span><span class="kw2">Serial</span>.<span class="kw3">read</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy4">;</span>        <span class="co1">// write it to the SoftSerial shield</span>
<span class="br0">}</span>
 
<span class="kw4">void</span> clearBufferArray<span class="br0">(</span><span class="br0">)</span>                     <span class="co1">// function to clear buffer array</span>
<span class="br0">{</span>
    <span class="kw1">for</span> <span class="br0">(</span><span class="kw4">int</span> i<span class="sy1">=</span><span class="nu0">0</span><span class="sy4">;</span> i<span class="sy1">&lt;</span>count<span class="sy4">;</span>i<span class="sy2">++</span><span class="br0">)</span>
    <span class="br0">{</span> buffer<span class="br0">[</span>i<span class="br0">]</span><span class="sy1">=</span><span class="kw2">NULL</span><span class="sy4">;</span><span class="br0">}</span>                      <span class="co1">// clear all index of array with command NULL</span>
<span class="br0">}</span></pre></div></div>
<ul><li>Install <a href="http://www.u-blox.com/images/Support/Support_Products/EvaluationSoftware/u-centersetup-6.2.0.0.zip">u-center</a>. Upload the code below to your Arduino/Seeeduino and then open u-center.
</li></ul>
<dl><dd>1) Click Receiver -&gt; Port and select the COM port that the Arduino is using.
</dd><dd>2) Click Receiver -&gt; Baudrate and make sure 9600 is selected. 
</dd><dd>3) Click View -&gt; Text Console and you should get a window that will stream NMEA data.
</dd></dl>
<dl><dd>4) Open the serial monitor,You can see as show below:
</dd><dd><img src="img/GPS_result.jpg" width="500"/>
</dd></dl>
<ul><li><i>To View data in Google Earth:</i>
</li></ul>
<dl><dd>1) Click File -&gt; Database Export -&gt; Google Earth KML 
</dd><dd>2) This Should launch Google Earth with the history that was captured by u-center.
</dd></dl>
<dl><dd>3) Alternatively, data can be recorded by pressing the red circle on the toolbar which will then ask you where you want to save the record. 
</dd><dd>4) When you have captured enough data, click the black square to stop recording. 
</dd><dd>5) You can then convert the .ubx file generated to KML by using uploading the ubx file to <a href="http://www.gpsvisualizer.com/">GPSVisualizer</a>
</dd></dl>
<h3>  With <a href="/GrovePiPlus" title="GrovePi+">Raspberry Pi</a> </h3>
<p>1. You need a Raspberry Pi and a GrovePi or GrovePi+.<br/>
2. You should have completed configuring the development environment, otherwise follow <a href="/GrovePiPlus#Introducing_the_GrovePi.2B">here</a>.
<br/>
3. Connection
<br/>
</p>
<ul><li> Plug Grove GPS into grovepi socket RPISER.<br/>
</li></ul>
<p>4. Navigate to the demos' directory: <br/>
</p>
<pre>   cd yourpath/GrovePi/Software/Python/
</pre>
<ul><li> To see the code
</li></ul>
<pre>   nano grove_gps.py   # "Ctrl+x" to exit #
</pre>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="python source-python"><pre class="de1"><span class="kw1">import</span> serial<span class="sy0">,</span> <span class="kw3">time</span>
<span class="kw1">import</span> smbus
<span class="kw1">import</span> <span class="kw3">math</span>
<span class="kw1">import</span> RPi.<span class="me1">GPIO</span> <span class="kw1">as</span> GPIO
<span class="kw1">import</span> <span class="kw3">struct</span>
<span class="kw1">import</span> <span class="kw3">sys</span>
 
ser <span class="sy0">=</span> serial.<span class="me1">Serial</span><span class="br0">(</span><span class="st0">'/dev/ttyAMA0'</span><span class="sy0">,</span>  <span class="nu0">9600</span><span class="sy0">,</span> timeout <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">)</span>	<span class="co1">#Open the serial port at 9600 baud</span>
ser.<span class="me1">flush</span><span class="br0">(</span><span class="br0">)</span>
 
<span class="kw1">class</span> GPS:
	<span class="co1">#The GPS module used is a Grove GPS module http://www.seeedstudio.com/depot/Grove-GPS-p-959.html</span>
	inp<span class="sy0">=</span><span class="br0">[</span><span class="br0">]</span>
	<span class="co1"># Refer to SIM28 NMEA spec file http://www.seeedstudio.com/wiki/images/a/a0/SIM28_DATA_File.zip</span>
	GGA<span class="sy0">=</span><span class="br0">[</span><span class="br0">]</span>
 
	<span class="co1">#Read data from the GPS</span>
	<span class="kw1">def</span> read<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:	
		<span class="kw1">while</span> <span class="kw2">True</span>:
			GPS.<span class="me1">inp</span><span class="sy0">=</span>ser.<span class="kw3">readline</span><span class="br0">(</span><span class="br0">)</span>
			<span class="kw1">if</span> GPS.<span class="me1">inp</span><span class="br0">[</span>:<span class="nu0">6</span><span class="br0">]</span> <span class="sy0">==</span><span class="st0">'$GPGGA'</span>: <span class="co1"># GGA data , packet 1, has all the data we need</span>
				<span class="kw1">break</span>
			<span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">0.1</span><span class="br0">)</span>
		<span class="kw1">try</span>:
			ind<span class="sy0">=</span>GPS.<span class="me1">inp</span>.<span class="me1">index</span><span class="br0">(</span><span class="st0">'$GPGGA'</span><span class="sy0">,</span><span class="nu0">5</span><span class="sy0">,</span><span class="kw2">len</span><span class="br0">(</span>GPS.<span class="me1">inp</span><span class="br0">)</span><span class="br0">)</span>	<span class="co1">#Sometimes multiple GPS data packets come into the stream. Take the data only after the last '$GPGGA' is seen</span>
			GPS.<span class="me1">inp</span><span class="sy0">=</span>GPS.<span class="me1">inp</span><span class="br0">[</span>ind:<span class="br0">]</span>
		<span class="kw1">except</span> <span class="kw2">ValueError</span>:
			<span class="kw1">print</span> <span class="st0">""</span>
		GPS.<span class="me1">GGA</span><span class="sy0">=</span>GPS.<span class="me1">inp</span>.<span class="me1">split</span><span class="br0">(</span><span class="st0">","</span><span class="br0">)</span>	<span class="co1">#Split the stream into individual parts</span>
		<span class="kw1">return</span> <span class="br0">[</span>GPS.<span class="me1">GGA</span><span class="br0">]</span>
 
	<span class="co1">#Split the data into individual elements</span>
	<span class="kw1">def</span> vals<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:
		<span class="kw3">time</span><span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>
		lat<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>
		lat_ns<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span>
		<span class="kw2">long</span><span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span>
		long_ew<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span>
		fix<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">6</span><span class="br0">]</span>
		sats<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">7</span><span class="br0">]</span>
		alt<span class="sy0">=</span>GPS.<span class="me1">GGA</span><span class="br0">[</span><span class="nu0">9</span><span class="br0">]</span>
		<span class="kw1">return</span> <span class="br0">[</span><span class="kw3">time</span><span class="sy0">,</span>fix<span class="sy0">,</span>sats<span class="sy0">,</span>alt<span class="sy0">,</span>lat<span class="sy0">,</span>lat_ns<span class="sy0">,</span><span class="kw2">long</span><span class="sy0">,</span>long_ew<span class="br0">]</span>
 
g<span class="sy0">=</span>GPS<span class="br0">(</span><span class="br0">)</span>
f<span class="sy0">=</span><span class="kw2">open</span><span class="br0">(</span><span class="st0">"gps_data.csv"</span><span class="sy0">,</span><span class="st0">'w'</span><span class="br0">)</span>	<span class="co1">#Open file to log the data</span>
f.<span class="me1">write</span><span class="br0">(</span><span class="st0">"name,latitude,longitude<span class="es0">\n</span>"</span><span class="br0">)</span>	<span class="co1">#Write the header to the top of the file</span>
ind<span class="sy0">=</span><span class="nu0">0</span>
<span class="kw1">while</span> <span class="kw2">True</span>:
	<span class="kw1">try</span>:
		x<span class="sy0">=</span>g.<span class="me1">read</span><span class="br0">(</span><span class="br0">)</span>	<span class="co1">#Read from GPS</span>
		<span class="br0">[</span>t<span class="sy0">,</span>fix<span class="sy0">,</span>sats<span class="sy0">,</span>alt<span class="sy0">,</span>lat<span class="sy0">,</span>lat_ns<span class="sy0">,</span><span class="kw2">long</span><span class="sy0">,</span>long_ew<span class="br0">]</span><span class="sy0">=</span>g.<span class="me1">vals</span><span class="br0">(</span><span class="br0">)</span>	<span class="co1">#Get the individial values</span>
		<span class="kw1">print</span> <span class="st0">"Time:"</span><span class="sy0">,</span>t<span class="sy0">,</span><span class="st0">"Fix status:"</span><span class="sy0">,</span>fix<span class="sy0">,</span><span class="st0">"Sats in view:"</span><span class="sy0">,</span>sats<span class="sy0">,</span><span class="st0">"Altitude"</span><span class="sy0">,</span>alt<span class="sy0">,</span><span class="st0">"Lat:"</span><span class="sy0">,</span>lat<span class="sy0">,</span>lat_ns<span class="sy0">,</span><span class="st0">"Long:"</span><span class="sy0">,</span><span class="kw2">long</span><span class="sy0">,</span>long_ew
		s<span class="sy0">=</span><span class="kw2">str</span><span class="br0">(</span>t<span class="br0">)</span>+<span class="st0">","</span>+<span class="kw2">str</span><span class="br0">(</span><span class="kw2">float</span><span class="br0">(</span>lat<span class="br0">)</span>/<span class="nu0">100</span><span class="br0">)</span>+<span class="st0">","</span>+<span class="kw2">str</span><span class="br0">(</span><span class="kw2">float</span><span class="br0">(</span><span class="kw2">long</span><span class="br0">)</span>/<span class="nu0">100</span><span class="br0">)</span>+<span class="st0">"<span class="es0">\n</span>"</span>	
		f.<span class="me1">write</span><span class="br0">(</span>s<span class="br0">)</span>	<span class="co1">#Save to file</span>
		<span class="kw3">time</span>.<span class="me1">sleep</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span>
	<span class="kw1">except</span> <span class="kw2">IndexError</span>:
		<span class="kw1">print</span> <span class="st0">"Unable to read"</span>
	<span class="kw1">except</span> <span class="kw2">KeyboardInterrupt</span>:
		f.<span class="me1">close</span><span class="br0">(</span><span class="br0">)</span>
		<span class="kw1">print</span> <span class="st0">"Exiting"</span>
		<span class="kw3">sys</span>.<span class="me1">exit</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span></pre></div></div>
<p>5. Run the demo.<br/>
</p>
<pre>   sudo python grove_gps.py
</pre>
<p>6. Result<br/>
</p>
<ul><li> Note: GPS is better outdoor using, recommand you to put your raspberry pi to the window or any place outdoor.
</li></ul>
<p><img src="img/Grovepi_gps_00.jpg" width="600"/><br/>
</p>
<h2>  SIM28 module Note:</h2>
<p>1. GPS Bee has change the module as SIM28 which the same footprint as origin version.<br/>
2. You should use <a href="res/SIMCom_GPS_DEMO_V1.07.zip">"SIMCom GPS DEMO"</a> tools to receive SIM28 module data.<br/>
3. Open SIMCom_GPS_DEMO tools, go to Module-&gt;properties-&gt;module-&gt;select SIM28.<br/>
<img src="img/SIM28_module_select.jpg" width="487"/><br/>
<br/>
4. Open SIMCom_GPS_DEMO tools, go to Module-&gt;connect. Select the serial port which the GPS module used.<br/>
<br/>
<img src="img/SIM28_module_tools_pannel.jpg" width="1059"/><br/>
</p>
<h2> Resources </h2>
<ul><li><a href="res/GPS.zip">GPS Eagle File</a>
</li><li><a href="res/GPS.pdf">GPS Schematic(PDF)</a><br/>
</li><li><a href="res/E-1612-UB_Datasheets_Sheet.pdf">E-1612-UB Datasheet</a>
</li><li><a href="res/U-blox-6-Receiver-Description-Including-Protocol-Specification.zip">U-Blox6 Receiver Description Protocol Spec</a>
</li><li><a href="https://www.u-blox.com/en/product/u-center-windows">U-Blox u-center GPS evaluation software</a>
</li><li><a href="res/SIM28_DATA_File.zip">SIM28_DATA_File</a>
</li><li><a href="res/SIMCom_GPS_DEMO_V1.07.zip">SIMCom_GPS_DEMO_V1.07</a><br/>
</li><li>
</li></ul>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>