<html><head><meta name="viewport" content="width=device-width, initial-scale=1"><link href=//fonts.googleapis.com/css?family=Raleway:400,300,600 rel=stylesheet type=text/css><link rel="stylesheet" type="text/css" href="../common/css/normalize.css"><link rel="stylesheet" type="text/css" href="../common/css/skeleton.css"><link rel="stylesheet" type="text/css" href="../common/css/wiki.css"><script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script><title>Grove - Ultrasonic Ranger</title><meta charset="utf-8"/></head><body><div class"container"><a href="../"><img src="../common/logo.png"/></a></div><div class="mw-content-ltr container" dir="ltr" id="mw-content-text" lang="en"><h1>Grove - Ultrasonic Ranger</h1>
<div class="thumb tright"><div class="thumbinner" style="width:352px;"><img src="img/Ultrasonic_Ranger.jpg" width="350"/> <div class="thumbcaption"></div></div></div>
<p>This Grove - Ultrasonic sensor is a non-contact distance measurement module which works at 42KHz, suitable for projects that require middle distance measurement.
</p><p><br/>
<a href="http://www.seeedstudio.com/depot/Grove-Ultrasonic-Ranger-p-960.html"><img src="../common/Get_One_Now_Banner.png" width="300"/></a>
</p><p><br/>
</p>
<p><br/>
</p>
<h2> Specification </h2>
<table>
<tr>
<th> Parameter </th>
<th> Value/Range
</th></tr>
<tr>
<td width="200">  Operating voltage </td>
<td width="200"> 3.3~5V
</td></tr>
<tr>
<td> Operating current </td>
<td> 15mA
</td></tr>
<tr>
<td> Ultrasonic frequency </td>
<td>42kHz
</td></tr>
<tr>
<td> Measuring range </td>
<td> 3-400cm
</td></tr>
<tr>
<td> Resolution </td>
<td> 1cm
</td></tr>
<tr>
<td> Output </td>
<td> PWM
</td></tr></table>
<p><br/>
</p>
<h2> Getting Started</h2>
<h3> With <a href="/w/index.php?title=Arduino&amp;action=edit&amp;redlink=1" title="Arduino (page does not exist)">Arduino</a></h3>
<p><iframe frameborder="0" height="342" src="http://docs.google.com/present/embed?id=dcn37mcz_22cmnwnwf8" width="410"></iframe>
</p><p>&lt;iframe style="height: 510px; width: 100%; margin: 10px 0 10px;" allowTransparency="true" src="<a href="https://codebender.cc/embed/sketch:97163">https://codebender.cc/embed/sketch:97163</a>" frameborder="0"&gt;&lt;/iframe&gt;
Here we demonstrate how to use Grove - Ultrasonic Ranger to obtain distance message.
</p><p>Connect Serial LCD to D4/D5 pins of Grove - Base Shield and connect Ultrasonic Ranger to D7.
</p><p><img src="img/UltrasonicRanger.png" width="600"/>
</p><p>Download the <a href="https://github.com/Seeed-Studio/Grove_Ultrasonic_Ranger">UltrasonicRanger Library</a> and <a href="https://github.com/Seeed-Studio/Grove_SerialLCDV1.1">SerialLCD Library</a> from Github. For this libraries, rather than from Arduino library files, they are from other pages. You need to install them to Arduino Library. Please refer to the course"How to install library" of wiki page to learn the specific steps.
</p><p>open code from the path：File-&gt;Examples-&gt;UltrasonicRanger-&gt;examples-&gt;UltraDisOnSeeedSerialLcd and upload. 
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="coMULTI">/***************************************************************************/</span>        
<span class="co1">// Function: Measure the distance to obstacles in front and display the</span>
<span class="co1">//                         result on seeedstudio serialLcd. Make sure you installed the</span>
<span class="co1">//                         serialLCD, SoftwareSerial and Ultrasonic library.        </span>
<span class="co1">//        Hardware: Grove - Ultrasonic Ranger, Grove - Serial LCD</span>
<span class="co1">//        Arduino IDE: Arduino-1.0</span>
<span class="co1">//        Author:         LG                </span>
<span class="co1">//        Date:          Jan 17,2013</span>
<span class="co1">//        Version: v1.0 modified by FrankieChu</span>
<span class="co1">//        by www.seeedstudio.com</span>
 
<span class="coMULTI">/*****************************************************************************/</span>
 
 
<span class="co2">#include &lt;SoftwareSerial.h&gt;</span>
<span class="co2">#include &lt;SerialLCD.h&gt;</span>
<span class="co2">#include "Ultrasonic.h"</span>
 
SerialLCD slcd<span class="br0">(</span><span class="nu0">11</span>,<span class="nu0">12</span><span class="br0">)</span><span class="sy4">;</span>
Ultrasonic ultrasonic<span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="sy4">;</span>
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
   slcd.<span class="kw3">begin</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span>
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span>
<span class="br0">{</span>
        <span class="kw4">long</span> RangeInCentimeters<span class="sy4">;</span>
        RangeInCentimeters <span class="sy1">=</span> ultrasonic.<span class="me1">MeasureInCentimeters</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">150</span><span class="br0">)</span><span class="sy4">;</span>
        slcd.<span class="kw3">clear</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
        slcd.<span class="kw3">setCursor</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">0</span><span class="br0">)</span><span class="sy4">;</span>
        slcd.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"The distance:"</span><span class="br0">)</span><span class="sy4">;</span>
        slcd.<span class="kw3">setCursor</span><span class="br0">(</span><span class="nu0">0</span>,<span class="nu0">1</span><span class="br0">)</span> <span class="sy4">;</span>
        slcd.<span class="kw3">print</span><span class="br0">(</span>RangeInCentimeters,<span class="kw2">DEC</span><span class="br0">)</span><span class="sy4">;</span>
        slcd.<span class="kw3">setCursor</span><span class="br0">(</span><span class="nu0">5</span>,<span class="nu0">1</span><span class="br0">)</span> <span class="sy4">;</span>
        slcd.<span class="kw3">print</span><span class="br0">(</span><span class="st0">"cm"</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p>Also we shot a video about it. Find it in the Resources! It can give you a more straightforward instruction.
</p>
<h3> With <a href="/w/index.php?title=TI_LaunchPad&amp;action=edit&amp;redlink=1" title="TI LaunchPad (page does not exist)">TI LaunchPad</a></h3>
<p>Sensing the Distance (Ultrasonic Ranger Sensor)
</p><p>This example shows how to measure the distance to obstacles using the ultrasonic sensor and display the value on a 4-Digital-Display (centimeters). 
</p><p><img src="img/Ultrasonic.jpg" width="600"/>
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="coMULTI">/*
 Ultrasonic-Ranger to 4-digit-display
 Measure the distance to obstacles in front and display the value on 
 4-digital-display
 
 The circuit:
 * Ultrasonic Ranger attached to SPI plug on Grove Base BoosterPack
 * one side pin (either one) to ground
 * the other side pin to +VCC
 * LED anode (long leg) attached to RED_LED
 * LED cathode (short leg) attached to ground
 
 * Note:  
 
 
 This example code is in the public domain.
 
 http://www.seeedstudio.com/wiki/Grove_-_Ultrasonic_Ranger 
 */</span>
 
<span class="co2">#include "TM1637.h" </span>
<span class="co2">#include "Ultrasonic.h"</span>
<span class="coMULTI">/* Macro Define */</span>
<span class="co2">#define CLK               40                  /* 4-digital display clock pin */</span>
<span class="co2">#define DIO               39                 /* 4-digital display data pin */</span>
<span class="co2">#define BLINK_LED         RED_LED            /* blink led */</span>
<span class="co2">#define ULTRASONIC_PIN    38                  /* pin of the Ultrasonic Ranger */</span>
 
<span class="coMULTI">/* Global Variables */</span>
TM1637 tm1637<span class="br0">(</span>CLK, DIO<span class="br0">)</span><span class="sy4">;</span>                  <span class="coMULTI">/* 4-digital display object */</span>
Ultrasonic ultrasonic<span class="br0">(</span>ULTRASONIC_PIN<span class="br0">)</span><span class="sy4">;</span>    <span class="coMULTI">/* Ultrasonic Ranger object */</span>
<span class="kw4">int</span> distance <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>                         <span class="coMULTI">/* variable to store the distance to obstacles in front */</span>
<span class="kw4">int</span> blink_interval <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>                   <span class="coMULTI">/* led delay time */</span>
int8_t bits<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span> <span class="sy1">=</span> <span class="br0">{</span><span class="nu0">0</span><span class="br0">}</span><span class="sy4">;</span>                     <span class="coMULTI">/* array to store the single bits of the value */</span>
 
<span class="coMULTI">/* the setup() method runs once, when the sketch starts */</span>
<span class="kw4">void</span> <span class="kw2">setup</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
 
    <span class="coMULTI">/* Initialize 4-digital display */</span>
    tm1637.<span class="kw3">init</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
    tm1637.<span class="me1">set</span><span class="br0">(</span>BRIGHT_TYPICAL<span class="br0">)</span><span class="sy4">;</span>
 
    <span class="coMULTI">/* declare the red_led pin as an OUTPUT */</span>
    <span class="kw3">pinMode</span><span class="br0">(</span>RED_LED, <span class="kw2">OUTPUT</span><span class="br0">)</span><span class="sy4">;</span>
 
<span class="br0">}</span>
 
<span class="coMULTI">/* the loop() method runs over and over again */</span>
<span class="kw4">void</span> <span class="kw2">loop</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>   
 
    distance <span class="sy1">=</span> ultrasonic.<span class="me1">MeasureInCentimeters</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>   <span class="coMULTI">/* read the value from the sensor */</span>   
 
    <span class="kw3">memset</span><span class="br0">(</span>bits, <span class="nu0">0</span>, <span class="nu0">4</span><span class="br0">)</span><span class="sy4">;</span>                             <span class="coMULTI">/* reset array when we use it */</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">3</span><span class="sy4">;</span> i <span class="sy1">&gt;=</span> <span class="nu0">0</span><span class="sy4">;</span> i<span class="sy2">--</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="coMULTI">/* get single bits of the analog value */</span>
        bits<span class="br0">[</span>i<span class="br0">]</span> <span class="sy1">=</span> distance <span class="sy2">%</span> <span class="nu0">10</span><span class="sy4">;</span>
        distance <span class="sy1">=</span> distance <span class="sy2">/</span> <span class="nu0">10</span><span class="sy4">;</span>  
        tm1637.<span class="kw3">display</span><span class="br0">(</span>i, bits<span class="br0">[</span>i<span class="br0">]</span><span class="br0">)</span><span class="sy4">;</span>                 <span class="coMULTI">/* display by 4-digital display */</span>
    <span class="br0">}</span>
    <span class="kw3">delay</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<p><br/>
</p>
<h3> With <a href="/GrovePiPlus" title="GrovePi+">Raspberry Pi</a></h3>
<p>First step,you should connect Ultrasonic to Port D4. Run the program below. It will print distance information on you terminal,as the figure below. 
<br/>
<img src="img/GrovePiPlus_Ultrasonic_Ranger_Sensor.jpg" width="600"/>
<br/>
<br/>
<img src="img/GrovePiPlus_Ultrasonic_Ranger_Sensor_terminal.jpg" width="600"/>
</p><p><br/>
</p>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"><span class="co2"># GrovePi + Grove Ultrasonic Ranger</span>
 
from grovepi import <span class="sy2">*</span>
 
<span class="co2"># Connect the Grove Ultrasonic Ranger to digital port D4</span>
<span class="co2"># SIG,NC,VCC,GND</span>
 
ultrasonic_ranger <span class="sy1">=</span> <span class="nu0">4</span>
 
<span class="kw1">while</span> True<span class="sy4">:</span>
    <span class="kw2">try</span><span class="sy4">:</span>
        <span class="co2"># Read distance value from Ultrasonic</span>
        <span class="kw3">print</span> ultrasonicRead<span class="br0">(</span>ultrasonic_ranger<span class="br0">)</span>
 
    except TypeError<span class="sy4">:</span>
        <span class="kw3">print</span> <span class="st0">"Error"</span>
    except IOError<span class="sy4">:</span>
        <span class="kw3">print</span> <span class="st0">"Error"</span></pre></div></div>
<p><br/>
</p>
<h4> Run The Program</h4>
<ul><li> Find the path to the file(According to your own path)
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1"> cd GrovePi<span class="sy2">/</span>Software<span class="sy2">/</span>Python<span class="sy2">/</span></pre></div></div>
<p><br/>
</p>
<ul><li> Run Program
</li></ul>
<div class="mw-geshi mw-code mw-content-ltr container" dir="ltr"><div class="arduino source-arduino"><pre class="de1">  sudo python grove_ultrasonic.<span class="me1">py</span></pre></div></div>
<p><br/>
</p>
<h2> Related Projects </h2>
<p>If you want to make some awesome projects by Grove - Ultrasonic Ranger, here's some projects for reference.
</p>
<h3> Automatic Water Level Controller</h3>
<p><img src="img/Automatic_Water_Level_Controller.jpg" width="600"/>
</p><p>This is an IoT demo make by Arduino and <a href="/Grove_System" title="Grove System">Grove</a>.
</p><p>There are many ways like using a float sensor to determine the water level, or using probes to detect peak and low level in the tank. How to measure water level without using probe or contacting with water? yeah there is a way just using a Ultrasonic sensor, this is very simple where the level of water is measured using ultrasonic sensor which gives the depth , by determining the tank depth we can set the maximum and minimum level. 
</p><p><br/>
<a href="http://www.seeedstudio.com/recipe/241-automatic-water-level-controller.html"><font color="#FF0000"><b>I want to make it.</b></font></a>
<br/>
</p>
<h3> Indoor Lightning Cloud</h3>
<p><img src="img/Indoor_Lightning_Cloud.gif" width="600"/>
</p><p>This is an IoT demo make by Seeeduino and <a href="/Grove_System" title="Grove System">Grove</a>.
</p><p>Make an indoor lightning Cloud, hang it up right over your door mat, blast whoever passing under it, feel the the beauty of nature in the house.
</p><p><a href="http://www.seeedstudio.com/recipe/180-indoor-lightning-cloud.html"><img src="img/Wiki_makeitnow_logo.png" width="200"/></a>
</p><p><br/>
</p>
<h3> The Colour Helix</h3>
<p><img src="img/The_Colour_Helix.JPG" width="600"/>
</p><p>This is an IoT demo make by Seeeduino and <a href="/Grove_System" title="Grove System">Grove</a>.
</p><p>Our artist Shihui Wang recently showed me her another amazing work of art: the Colour Helix. Again with few simple components she presented us the beauty of the combination of art and electronics.
</p><p>With a Grove - Ultrasonic Ranger she can magically control the number of illuminated LEDs inside the Helix by raising or lower her palm in the air. 
</p><p><a href="http://www.seeedstudio.com/recipe/138-the-colour-helix.html"><img src="img/Wiki_makeitnow_logo.png" width="200"/></a>
</p><p><br/>
</p>
<h2> Resources </h2>
<ul><li><a href="res/Ultrasonic.zip">Ultrasonic Ranger library</a>
</li><li><a href="http://v.youku.com/v_show/id_XMzEzNTcwODI4.html">Video demonstration</a>
</li><li><a href="https://github.com/Seeed-Studio/Grove_Ultrasonic_Ranger">Github repository for Grove_Ultrasonic_Ranger Library (new) </a>
</li><li><a href="https://github.com/Seeed-Studio/Grove_SerialLCDV1.1">SerialLCD Library</a>
</li><li><a href="/Suli">Suli-compatible Library</a>
</li><li>
</li></ul>
<p><br/>
</p>
<h2> Help us to make it better </h2>
<p><iframe frameborder="0" height="500" src="https://www.surveymonkey.com/r/GJ82Y22" width="500"></iframe>
</p>
Copyright (c) 2008-2016 Seeed Development Limited (<a href="http://www.seeedstudio.com">www.seeedstudio.com</a> / <a href="http://www.seeed.cc">www.seeed.cc</a>)<h6>This static html page was created from http://www.seeedstudio.com/wiki</h6></div></body></html>